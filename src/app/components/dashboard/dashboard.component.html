<div class="dashboard bg-gray-50 min-h-screen p-6">
  <!-- Header avec gradient vert -->
  <div class="bg-gradient-to-r from-primary-600 to-primary-700 text-white p-8 rounded-2xl mb-8 shadow-soft">
    <h1 class="text-4xl font-bold">Tableau de bord</h1>
    <p class="text-primary-100 mt-2 text-lg">Vue d'ensemble de l'activité ANARE-CI</p>
    <div class="mt-4 text-sm text-primary-200">
      Dernière mise à jour : {{ currentDate | date:'dd/MM/yyyy à HH:mm' }}
    </div>
  </div>

  <!-- Statistiques principales avec cartes modernes -->
  <div class="stats-grid mb-8">
    @if (canManageRecours()) {
      <!-- Total Recours -->
      <div class="stat-card group hover:scale-105 transition-transform duration-200">
        <div class="stat-card-header">
          <div class="p-3 rounded-xl bg-primary-100 text-primary-600 group-hover:bg-primary-600 group-hover:text-white transition-colors duration-200">
            <svg class="stat-card-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                    d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
          </div>
          <div class="text-sm text-gray-500 font-medium">TOTAL</div>
        </div>
        <div class="stat-card-value text-primary-600">{{ totalRecours }}</div>
        <div class="stat-card-label">Recours enregistrés</div>
        <div class="stat-card-change positive">
          <svg class="h-3 w-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
          </svg>
          +12% ce mois
        </div>
      </div>

      <!-- Recours en cours -->
      <div class="stat-card group hover:scale-105 transition-transform duration-200">
        <div class="stat-card-header">
          <div class="p-3 rounded-xl bg-warning-100 text-warning-600 group-hover:bg-warning-600 group-hover:text-white transition-colors duration-200">
            <svg class="stat-card-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </div>
          <div class="text-sm text-gray-500 font-medium">EN COURS</div>
        </div>
        <div class="stat-card-value text-warning-600">{{ recoursEnCours }}</div>
        <div class="stat-card-label">Recours en traitement</div>
        <div class="stat-card-change positive">
          <svg class="h-3 w-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
          </svg>
          +8% cette semaine
        </div>
      </div>
    }

    @if (canManageTickets()) {
      <!-- Total Tickets -->
      <div class="stat-card group hover:scale-105 transition-transform duration-200">
        <div class="stat-card-header">
          <div class="p-3 rounded-xl bg-blue-100 text-blue-600 group-hover:bg-blue-600 group-hover:text-white transition-colors duration-200">
            <svg class="stat-card-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"></path>
            </svg>
          </div>
          <div class="text-sm text-gray-500 font-medium">TICKETS</div>
        </div>
        <div class="stat-card-value text-blue-600">{{ totalTickets }}</div>
        <div class="stat-card-label">Tickets ouverts</div>
        <div class="stat-card-change negative">
          <svg class="h-3 w-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M16.707 10.293a1 1 0 010 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 111.414-1.414L9 14.586V3a1 1 0 012 0v11.586l4.293-4.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
          </svg>
          -5% ce mois
        </div>
      </div>

      <!-- Tickets résolus -->
      <div class="stat-card group hover:scale-105 transition-transform duration-200">
        <div class="stat-card-header">
          <div class="p-3 rounded-xl bg-success-100 text-success-600 group-hover:bg-success-600 group-hover:text-white transition-colors duration-200">
            <svg class="stat-card-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </div>
          <div class="text-sm text-gray-500 font-medium">RÉSOLUS</div>
        </div>
        <div class="stat-card-value text-success-600">{{ ticketsResolus }}</div>
        <div class="stat-card-label">Tickets fermés</div>
        <div class="stat-card-change positive">
          <svg class="h-3 w-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
          </svg>
          +15% ce mois
        </div>
      </div>
    }
  </div>

  <!-- Activités récentes et notifications -->
  <div class="dashboard-grid mb-8">
    <!-- Activités récentes -->
    <div class="card">
      <div class="card-header">
        <h3 class="text-lg font-semibold text-gray-900 flex items-center">
          <svg class="h-5 w-5 text-primary-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          Activités récentes
        </h3>
      </div>
      <div class="card-body">
        <div class="space-y-4">
          @for (activite of activitesRecentes; track $index) {
            <div class="flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors">
              <div class="flex-shrink-0">
                <div class="h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center">
                  @switch (activite.type) {
                    @case ('recours') {
                      <svg class="h-4 w-4 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                      </svg>
                    }
                    @case ('ticket') {
                      <svg class="h-4 w-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"></path>
                      </svg>
                    }
                  }
                </div>
              </div>
              <div class="flex-1 min-w-0">
                <p class="text-sm font-medium text-gray-900">{{ activite.action }}</p>
                <p class="text-sm text-gray-500">{{ activite.details }}</p>
                <p class="text-xs text-gray-400 mt-1">Il y a {{ activite.time }}</p>
              </div>
            </div>
          }
        </div>
      </div>
    </div>

    <!-- Alertes et notifications -->
    <div class="card">
      <div class="card-header">
        <h3 class="text-lg font-semibold text-gray-900 flex items-center">
          <svg class="h-5 w-5 text-warning-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
          </svg>
          Alertes importantes
        </h3>
      </div>
      <div class="card-body">
        <div class="space-y-4">
          @for (alerte of alertes; track $index) {
            <div class="p-4 rounded-lg border-l-4" 
                 [class]="getAlerteClass(alerte.type)">
              <div class="flex">
                <div class="flex-shrink-0">
                  @switch (alerte.type) {
                    @case ('urgent') {
                      <svg class="h-5 w-5 text-danger-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                      </svg>
                    }
                    @case ('warning') {
                      <svg class="h-5 w-5 text-warning-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                      </svg>
                    }
                    @case ('info') {
                      <svg class="h-5 w-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                      </svg>
                    }
                    @case ('success') {
                      <svg class="h-5 w-5 text-success-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                      </svg>
                    }
                  }
                </div>
                <div class="ml-3">
                  <h4 class="text-sm font-medium">{{ getAlertTitle(alerte.type) }}</h4>
                  <p class="text-sm text-gray-600 mt-1">{{ alerte.message }}</p>
                  <p class="text-xs text-gray-400 mt-2">{{ alerte.date | date:'dd/MM à HH:mm' }}</p>
                </div>
              </div>
            </div>
          }
        </div>
      </div>
    </div>
  </div>

  <!-- Actions rapides -->
  <div class="card">
    <div class="card-header">
      <h3 class="text-lg font-semibold text-gray-900">Actions rapides</h3>
    </div>
    <div class="card-body">
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
        @if (canManageRecours()) {
          <button routerLink="/recours/nouveau" class="btn btn-primary btn-lg group">
            <svg class="h-5 w-5 mr-2 group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
            </svg>
            Nouveau recours
          </button>
        }

        @if (canManageTickets()) {
          <button routerLink="/tickets/nouveau" class="btn btn-secondary btn-lg group">
            <svg class="h-5 w-5 mr-2 group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"></path>
            </svg>
            Nouveau ticket
          </button>
        }

        @if (canViewReports()) {
          <button routerLink="/rapports" class="btn btn-warning btn-lg group">
            <svg class="h-5 w-5 mr-2 group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
            </svg>
            Voir rapports
          </button>
        }

        <button class="btn btn-success btn-lg group">
          <svg class="h-5 w-5 mr-2 group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
          </svg>
          Aide & Support
        </button>
      </div>
    </div>
  </div>
</div>
