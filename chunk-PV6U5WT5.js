import{L as p,a as m,b as l,j as A,m as s,q as T}from"./chunk-I6GMZB6S.js";var I=(u=>(u.BROUILLON="BROUILLON",u.SOUMIS="SOUMIS",u.EN_COURS_ANALYSE="EN_COURS_ANALYSE",u.ATTENTE_INFORMATIONS="ATTENTE_INFORMATIONS",u.EN_COURS_TRAITEMENT="EN_COURS_TRAITEMENT",u.VALIDE_NIVEAU_1="VALIDE_NIVEAU_1",u.VALIDE_NIVEAU_2="VALIDE_NIVEAU_2",u.REJETE="REJETE",u.RESOLU="RESOLU",u.FERME="FERME",u.NOUVEAU="SOUMIS",u.EN_COURS="EN_COURS_TRAITEMENT",u.EN_ATTENTE="ATTENTE_INFORMATIONS",u))(I||{}),N=(r=>(r.BASSE="BASSE",r.NORMALE="NORMALE",r.HAUTE="HAUTE",r.URGENTE="URGENTE",r))(N||{}),g=(a=>(a.TECHNIQUE="TECHNIQUE",a.FACTURATION="FACTURATION",a.SERVICE_CLIENT="SERVICE_CLIENT",a.COMMERCIAL="COMMERCIAL",a.JURIDIQUE="JURIDIQUE",a.LITIGE_FACTURATION="LITIGE_FACTURATION",a.QUALITE_SERVICE="QUALITE_SERVICE",a.COUPURE_ABUSIVE="COUPURE_ABUSIVE",a.RACCORDEMENT="RACCORDEMENT",a.AUTRE="AUTRE",a))(g||{}),U=(a=>(a.TELEPHONE="TELEPHONE",a.EMAIL="EMAIL",a.COURRIER="COURRIER",a.SITE_WEB="SITE_WEB",a.AGENCE="AGENCE",a.SMS="SMS",a.PHYSIQUE="PHYSIQUE",a.WHATSAPP="WHATSAPP",a.FACEBOOK="FACEBOOK",a.TWITTER="TWITTER",a))(U||{});var C=(o=>(o.ADMIN="ADMIN",o.AGENT_RECOURS="AGENT_RECOURS",o.SUPERVISEUR_RECOURS="SUPERVISEUR_RECOURS",o.TECHNICIEN_IT="TECHNICIEN_IT",o.SUPERVISEUR_IT="SUPERVISEUR_IT",o.UTILISATEUR="UTILISATEUR",o))(C||{});var O=class E{recoursSubject=new A([]);recours$=this.recoursSubject.asObservable();mockRecours=[{id:"1",numero:"REC-2025-001",numeroRecours:"REC-2025-001",titre:"Contestation facture janvier 2025",description:"Je conteste les frais suppl\xE9mentaires factur\xE9s sur ma ligne principale car ils ne correspondent pas \xE0 mon forfait.",type:"FACTURATION",typeRecours:"FACTURATION",statut:"EN_COURS_TRAITEMENT",priorite:"NORMALE",clientId:"4",clientNom:"Fatou Ouattara",clientEmail:"utilisateur@anare-ci.org",clientTelephone:"+225 07 12 34 56 81",requrantNom:"Ouattara",requrantPrenom:"Fatou",requrantEmail:"utilisateur@anare-ci.org",requrantTelephone:"+225 07 12 34 56 81",canalEntree:"EMAIL",montantLitige:25e3,assigneA:"superviseur.recours@anare-ci.org",dateCreation:new Date("2025-01-15"),dateModification:new Date,dateEcheance:new Date("2025-02-15"),niveauValidation:0,validateurs:{},fichiers:[],commentaires:[{id:"1",auteur:"Fatou Ouattara",contenu:"Demande initiale cr\xE9\xE9e automatiquement",dateCreation:new Date("2025-01-15"),type:"CLIENT"},{id:"2",auteur:"Aminata Konat\xE9",contenu:"Prise en charge du dossier. Analyse en cours.",dateCreation:new Date("2025-01-16"),type:"INTERNE"}],actions:[{id:"1",action:"Cr\xE9ation du recours",effectueePar:"Fatou Ouattara",dateAction:new Date("2025-01-15"),statutAvant:"BROUILLON",statutApres:"SOUMIS"},{id:"2",action:"Prise en charge",effectueePar:"Aminata Konat\xE9",dateAction:new Date("2025-01-16"),statutAvant:"SOUMIS",statutApres:"EN_COURS_ANALYSE"}]},{id:"2",numero:"REC-2025-002",numeroRecours:"REC-2025-002",titre:"Demande de remboursement trop-per\xE7u",description:"Suite \xE0 un contr\xF4le de facturation, j'ai identifi\xE9 un trop-per\xE7u de 150 000 FCFA sur les 6 derniers mois. Je demande le remboursement.",type:"FACTURATION",typeRecours:"FACTURATION",statut:"EN_COURS_TRAITEMENT",priorite:"HAUTE",clientId:"5",clientNom:"Kon\xE9",clientEmail:"kone.marie@entreprise.ci",clientTelephone:"+225 05 67 89 01 23",requrantNom:"Kon\xE9",requrantPrenom:"Marie",requrantEmail:"kone.marie@entreprise.ci",requrantTelephone:"+225 05 67 89 01 23",canalEntree:"AGENCE",montantLitige:15e4,assigneA:"superviseur.recours@anare-ci.org",dateCreation:new Date("2025-01-20"),dateModification:new Date,dateEcheance:new Date("2025-02-20"),niveauValidation:0,validateurs:{},fichiers:[],commentaires:[],actions:[]},{id:"3",numero:"REC-2025-003",numeroRecours:"REC-2025-003",titre:"Contestation coupure abusive",description:"Ma ligne a \xE9t\xE9 coup\xE9e alors que mes factures sont \xE0 jour. Je demande le r\xE9tablissement imm\xE9diat et une indemnisation.",type:"COUPURE_ABUSIVE",typeRecours:"COUPURE_ABUSIVE",statut:"SOUMIS",priorite:"URGENTE",clientId:"6",clientNom:"Bamba",clientEmail:"paul.bamba@gmail.com",clientTelephone:"+225 01 23 45 67 89",requrantNom:"Bamba",requrantPrenom:"Paul",requrantEmail:"paul.bamba@gmail.com",requrantTelephone:"+225 01 23 45 67 89",canalEntree:"TELEPHONE",montantLitige:0,assigneA:"superviseur.recours@anare-ci.org",dateCreation:new Date("2025-01-25"),dateModification:new Date,dateEcheance:new Date("2025-02-25"),niveauValidation:0,validateurs:{},fichiers:[],commentaires:[],actions:[]},{id:"4",numero:"REC-2025-004",numeroRecours:"REC-2025-004",titre:"Qualit\xE9 de service d\xE9grad\xE9e",description:"Depuis 3 mois, la qualit\xE9 de ma connexion internet est tr\xE8s mauvaise. D\xE9bit faible, coupures fr\xE9quentes. Demande de compensation.",type:"QUALITE_SERVICE",typeRecours:"QUALITE_SERVICE",statut:"ATTENTE_INFORMATIONS",priorite:"NORMALE",clientId:"7",clientNom:"Traor\xE9",clientEmail:"ibrahim.traore@yahoo.fr",clientTelephone:"+225 07 98 76 54 32",requrantNom:"Traor\xE9",requrantPrenom:"Ibrahim",requrantEmail:"ibrahim.traore@yahoo.fr",requrantTelephone:"+225 07 98 76 54 32",canalEntree:"SITE_WEB",montantLitige:75e3,assigneA:"superviseur.recours@anare-ci.org",dateCreation:new Date("2025-01-28"),dateModification:new Date,dateEcheance:new Date("2025-02-28"),niveauValidation:0,validateurs:{},fichiers:[],commentaires:[],actions:[]},{id:"5",numero:"REC-2025-005",numeroRecours:"REC-2025-005",titre:"Probl\xE8me raccordement nouveau local",description:"Demande de raccordement d\xE9pos\xE9e il y a 2 mois, toujours pas de nouvelles. Besoin urgent pour ouverture commerce.",type:"RACCORDEMENT",typeRecours:"RACCORDEMENT",statut:"EN_COURS_TRAITEMENT",priorite:"HAUTE",clientId:"8",clientNom:"Diabat\xE9",clientEmail:"awa.diabate@commerce.ci",clientTelephone:"+225 05 11 22 33 44",requrantNom:"Diabat\xE9",requrantPrenom:"Awa",requrantEmail:"awa.diabate@commerce.ci",requrantTelephone:"+225 05 11 22 33 44",canalEntree:"AGENCE",montantLitige:0,assigneA:"superviseur.recours@anare-ci.org",dateCreation:new Date("2025-01-30"),dateModification:new Date,dateEcheance:new Date("2025-03-01"),niveauValidation:0,validateurs:{},fichiers:[],commentaires:[],actions:[]},{id:"6",numero:"REC-2025-006",numeroRecours:"REC-2025-006",titre:"Demande de remboursement suite \xE0 coupure",description:"Ma ligne a \xE9t\xE9 coup\xE9e pendant 3 jours sans pr\xE9avis. Je demande un remboursement proportionnel \xE0 la dur\xE9e de la coupure.",type:"FACTURATION",typeRecours:"FACTURATION",statut:"SOUMIS",priorite:"NORMALE",clientId:"4",clientNom:"Utilisateur D\xE9mo",clientEmail:"utilisateur@anare-ci.org",clientTelephone:"+225 07 98 76 54 32",requrantNom:"D\xE9mo",requrantPrenom:"Utilisateur",requrantEmail:"utilisateur@anare-ci.org",requrantTelephone:"+225 07 98 76 54 32",canalEntree:"SITE_WEB",montantLitige:15e3,assigneA:"superviseur.recours@anare-ci.org",dateCreation:new Date("2025-02-01"),dateModification:new Date,dateEcheance:new Date("2025-03-03"),niveauValidation:0,validateurs:{},fichiers:[],commentaires:[],actions:[]}];constructor(){this.recoursSubject.next(this.mockRecours)}getRecours(){return this.recours$}getRecoursById(e){return s(this.mockRecours.find(i=>i.id===e))}creerRecours(e){let i={id:this.generateId(),numero:this.generateNumero(),numeroRecours:this.generateNumero(),titre:e.titre||"",description:e.description||"",type:e.type||"TECHNIQUE",typeRecours:e.type||"TECHNIQUE",statut:"BROUILLON",priorite:e.priorite||"NORMALE",clientId:e.clientId||"",clientNom:e.clientNom||"",clientEmail:e.clientEmail||"",clientTelephone:e.clientTelephone,requrantNom:e.requrantNom||e.clientNom||"",requrantPrenom:e.requrantPrenom||"",requrantEmail:e.requrantEmail||e.clientEmail||"",requrantTelephone:e.requrantTelephone||e.clientTelephone,canalEntree:e.canalEntree||"EMAIL",montantLitige:e.montantLitige,dateCreation:new Date,dateModification:new Date,niveauValidation:0,validateurs:{},fichiers:e.fichiers||[],commentaires:[],actions:[]};return this.mockRecours.push(i),this.recoursSubject.next([...this.mockRecours]),s(i)}mettreAJourRecours(e,i){let t=this.mockRecours.findIndex(r=>r.id===e);if(t!==-1){let r=l(m(m({},this.mockRecours[t]),i),{dateModification:new Date});return this.mockRecours[t]=r,this.recoursSubject.next([...this.mockRecours]),s(r)}throw new Error("Recours non trouv\xE9")}changerStatut(e,i,t,r){let n=this.mockRecours.find(c=>c.id===e);if(!n)throw new Error("Recours non trouv\xE9");let o={id:this.generateId(),action:`Changement de statut vers ${i}`,effectueePar:r||"Syst\xE8me",dateAction:new Date,commentaire:t,statutAvant:n.statut,statutApres:i};if(n.statut=i,n.actions.push(o),n.dateModification=new Date,t){let c={id:this.generateId(),auteur:r||"Syst\xE8me",contenu:t,dateCreation:new Date,type:"INTERNE"};n.commentaires.push(c)}return i==="VALIDE_NIVEAU_1"?(n.niveauValidation=1,n.validateurs.niveau1=r,n.validateurs.dateValidationNiveau1=new Date):i==="VALIDE_NIVEAU_2"?(n.niveauValidation=2,n.validateurs.niveau2=r,n.validateurs.dateValidationNiveau2=new Date):i==="RESOLU"&&(n.dateResolution=new Date,n.tempsTraitement=this.calculerTempsTraitement(n.dateCreation,new Date)),this.recoursSubject.next([...this.mockRecours]),s(n)}ajouterCommentaire(e,i,t,r="INTERNE",n){let o=this.mockRecours.find(d=>d.id===e);if(!o)throw new Error("Recours non trouv\xE9");let c={id:this.generateId(),auteur:t,contenu:i,dateCreation:new Date,type:r,fichiers:n};return o.commentaires.push(c),o.dateModification=new Date,this.recoursSubject.next([...this.mockRecours]),s(c)}assignerRecours(e,i,t){let r=this.mockRecours.find(o=>o.id===e);if(!r)throw new Error("Recours non trouv\xE9");let n={id:this.generateId(),action:`Assignation \xE0 ${i}`,effectueePar:t,dateAction:new Date,statutAvant:r.statut,statutApres:r.statut};return r.assigneA=i,r.actions.push(n),r.dateModification=new Date,this.recoursSubject.next([...this.mockRecours]),s(r)}getStatutOptions(){return[{value:"BROUILLON",label:"Brouillon",color:"gray"},{value:"SOUMIS",label:"Soumis",color:"blue"},{value:"EN_COURS_ANALYSE",label:"En cours d'analyse",color:"yellow"},{value:"ATTENTE_INFORMATIONS",label:"Attente informations",color:"orange"},{value:"EN_COURS_TRAITEMENT",label:"En cours de traitement",color:"purple"},{value:"VALIDE_NIVEAU_1",label:"Valid\xE9 niveau 1",color:"indigo"},{value:"VALIDE_NIVEAU_2",label:"Valid\xE9 niveau 2",color:"green"},{value:"REJETE",label:"Rejet\xE9",color:"red"},{value:"RESOLU",label:"R\xE9solu",color:"green"},{value:"FERME",label:"Ferm\xE9",color:"gray"}]}generateId(){return Math.random().toString(36).substr(2,9)}generateNumero(){let e=new Date().getFullYear(),i=this.mockRecours.length+1;return`REC-${e}-${i.toString().padStart(3,"0")}`}calculerTempsTraitement(e,i){return Math.round((i.getTime()-e.getTime())/(1e3*60*60))}getAllRecours(){return this.getRecours()}createRecours(e){return this.creerRecours(e)}getStatistiques(){return this.getRecours().pipe(T(e=>({total:e.length,nouveaux:e.filter(t=>t.statut==="BROUILLON").length,enCours:e.filter(t=>["SOUMIS","EN_COURS_ANALYSE","EN_COURS_TRAITEMENT"].includes(t.statut)).length,valides:e.filter(t=>["VALIDE_NIVEAU_1","VALIDE_NIVEAU_2"].includes(t.statut)).length,resolus:e.filter(t=>t.statut==="RESOLU").length,rejetes:e.filter(t=>t.statut==="REJETE").length,enAttente:e.filter(t=>t.statut==="ATTENTE_INFORMATIONS").length,fermes:e.filter(t=>t.statut==="FERME").length})))}static \u0275fac=function(i){return new(i||E)};static \u0275prov=p({token:E,factory:E.\u0275fac,providedIn:"root"})};var f=class E{ticketsSubject=new A([]);tickets$=this.ticketsSubject.asObservable();constructor(){this.loadMockData()}loadMockData(){let e=[{id:"1",numero:"TKT-2024-001",numeroTicket:"TKT-2024-001",titre:"Panne imprimante bureau 201",description:"L'imprimante HP LaserJet du bureau 201 ne r\xE9pond plus. Voyant rouge allum\xE9.",type:"MATERIEL",typeIncident:"MATERIEL",categorie:"PRINTER",priorite:"NORMALE",statut:"NOUVEAU",demandeurId:"marie.dupont",demandeurNom:"Marie Dupont",demandeurEmail:"marie.dupont@anare.ci",demandeur:"Marie Dupont",dateCreation:new Date("2024-01-16"),dateModification:new Date("2024-01-16"),sla:{tempsReponse:2,tempsResolution:24,respecte:!0},escalades:[],niveauEscalade:1,materielConcerne:"HP LaserJet Pro 400",fichiers:[],commentaires:[],actions:[{id:"1",action:"CREATION",effectueePar:"marie.dupont@anare.ci",dateAction:new Date("2024-01-16"),commentaire:"Ticket cr\xE9\xE9 par l'utilisateur",statutAvant:"NOUVEAU",statutApres:"NOUVEAU"}],historique:[]},{id:"2",numero:"TKT-2024-002",numeroTicket:"TKT-2024-002",titre:"Probl\xE8me connexion VPN",description:"Impossible de se connecter au VPN depuis ce matin.",type:"LOGICIEL",typeIncident:"LOGICIEL",categorie:"NETWORK",priorite:"HAUTE",statut:"EN_COURS",demandeurId:"jean.kouassi",demandeurNom:"Jean Kouassi",demandeurEmail:"jean.kouassi@anare.ci",demandeur:"Jean Kouassi",assigneA:"technicien.it@anare.ci",dateCreation:new Date("2024-01-15"),dateModification:new Date("2024-01-15"),sla:{tempsReponse:1,tempsResolution:4,respecte:!0},escalades:[],niveauEscalade:1,logicielConcerne:"Cisco AnyConnect",fichiers:[],commentaires:[],actions:[{id:"2",action:"CREATION",effectueePar:"jean.kouassi@anare.ci",dateAction:new Date("2024-01-15"),statutAvant:"NOUVEAU",statutApres:"NOUVEAU"},{id:"3",action:"ASSIGNATION",effectueePar:"superviseur.it@anare.ci",dateAction:new Date("2024-01-15"),commentaire:"Assign\xE9 au technicien IT",statutAvant:"NOUVEAU",statutApres:"EN_COURS"}],historique:[]},{id:"3",numero:"TKT-2024-003",numeroTicket:"TKT-2024-003",titre:"Demande cr\xE9ation compte utilisateur",description:"Cr\xE9ation de compte pour nouveau employ\xE9 - D\xE9partement Marketing",type:"DEMANDE_SERVICE",typeIncident:"DEMANDE_SERVICE",categorie:"ACCOUNT",priorite:"BASSE",statut:"RESOLU",demandeurId:"rh.admin",demandeurNom:"RH Admin",demandeurEmail:"rh.admin@anare.ci",demandeur:"RH Admin",assigneA:"admin.it@anare.ci",dateCreation:new Date("2024-01-14"),dateModification:new Date("2024-01-14"),dateResolution:new Date("2024-01-14"),sla:{tempsReponse:4,tempsResolution:8,respecte:!0},escalades:[],niveauEscalade:1,fichiers:[],commentaires:[],actions:[{id:"4",action:"CREATION",effectueePar:"rh.admin@anare.ci",dateAction:new Date("2024-01-14"),statutAvant:"NOUVEAU",statutApres:"NOUVEAU"},{id:"5",action:"RESOLUTION",effectueePar:"admin.it@anare.ci",dateAction:new Date("2024-01-14"),commentaire:"Compte cr\xE9\xE9 avec succ\xE8s",statutAvant:"EN_COURS",statutApres:"RESOLU"}],historique:[],tempsResolution:120},{id:"4",numero:"TKT-2025-004",numeroTicket:"TKT-2025-004",titre:"Probl\xE8me acc\xE8s email",description:"Je n'arrive plus \xE0 acc\xE9der \xE0 ma bo\xEEte email depuis hier. Messages d'erreur de connexion.",type:"LOGICIEL",typeIncident:"LOGICIEL",categorie:"EMAIL",priorite:"NORMALE",statut:"NOUVEAU",demandeurId:"utilisateur",demandeurNom:"Utilisateur D\xE9mo",demandeurEmail:"utilisateur@anare-ci.org",demandeur:"Utilisateur D\xE9mo",dateCreation:new Date("2025-01-30"),dateModification:new Date("2025-01-30"),sla:{tempsReponse:2,tempsResolution:8,respecte:!0},escalades:[],niveauEscalade:1,logicielConcerne:"Microsoft Outlook",fichiers:[],commentaires:[],actions:[{id:"4",action:"CREATION",effectueePar:"utilisateur@anare-ci.org",dateAction:new Date("2025-01-30"),statutAvant:"NOUVEAU",statutApres:"NOUVEAU"}],historique:[]}];e.forEach(i=>{i.historique=i.actions}),this.ticketsSubject.next(e)}getAllTickets(){return this.tickets$}getTicketById(e){let i=this.ticketsSubject.value;return s(i.find(t=>t.id===e))}createTicket(e){let i=this.ticketsSubject.value,t={id:Date.now().toString(),numero:`TKT-2024-${String(i.length+1).padStart(3,"0")}`,numeroTicket:`TKT-2024-${String(i.length+1).padStart(3,"0")}`,titre:e.titre,description:e.description,type:e.type||"INCIDENT",typeIncident:e.type||"INCIDENT",categorie:e.categorie||"OTHER",priorite:e.priorite||"NORMALE",statut:"NOUVEAU",demandeurId:e.demandeurId||"user",demandeurNom:e.demandeurNom||"Utilisateur",demandeurEmail:e.demandeurEmail||"user@anare.ci",demandeur:e.demandeurNom||"Utilisateur",dateCreation:new Date,dateModification:new Date,sla:{tempsReponse:2,tempsResolution:24,respecte:!0},escalades:[],niveauEscalade:1,fichiers:e.fichiers||[],commentaires:[],actions:[{id:Date.now().toString(),action:"CREATION",effectueePar:e.demandeurEmail||"user@anare.ci",dateAction:new Date,commentaire:"Ticket cr\xE9\xE9",statutAvant:"NOUVEAU",statutApres:"NOUVEAU"}],historique:[]};t.historique=t.actions;let r=[...i,t];return this.ticketsSubject.next(r),s(t)}updateTicketStatus(e,i,t){let r=this.ticketsSubject.value,n=r.findIndex(a=>a.id===e);if(n===-1)return s(null);let o=r[n],c=o.statut,d={id:Date.now().toString(),action:"CHANGEMENT_STATUT",effectueePar:"system@anare.ci",dateAction:new Date,commentaire:t||`Statut chang\xE9 de ${c} vers ${i}`,statutAvant:c,statutApres:i},R=l(m({},o),{statut:i,dateModification:new Date,actions:[...o.actions,d]});return R.historique=R.actions,r[n]=R,this.ticketsSubject.next(r),s(R)}assignTicket(e,i){let t=this.ticketsSubject.value,r=t.findIndex(d=>d.id===e);if(r===-1)return s(null);let n=t[r],o={id:Date.now().toString(),action:"ASSIGNATION",effectueePar:"system@anare.ci",dateAction:new Date,commentaire:`Ticket assign\xE9 \xE0 ${i}`,statutAvant:n.statut,statutApres:n.statut},c=l(m({},n),{assigneA:i,dateModification:new Date,actions:[...n.actions,o]});return c.historique=c.actions,t[r]=c,this.ticketsSubject.next(t),s(c)}getTicketsByStatus(e){let i=this.ticketsSubject.value;return s(i.filter(t=>t.statut===e))}getTicketsByPriority(e){let i=this.ticketsSubject.value;return s(i.filter(t=>t.priorite===e))}getStatistiques(){return this.getStatistics()}getStatistics(){let e=this.ticketsSubject.value,i={total:e.length,nouveau:e.filter(t=>t.statut==="NOUVEAU").length,enCours:e.filter(t=>t.statut==="EN_COURS").length,resolu:e.filter(t=>t.statut==="RESOLU").length,ferme:e.filter(t=>t.statut==="FERME").length,haute:e.filter(t=>t.priorite==="HAUTE").length,critique:e.filter(t=>t.priorite==="CRITIQUE").length,tempsResolutionMoyen:this.calculateAverageResolutionTime(e)};return s(i)}calculateAverageResolutionTime(e){let i=e.filter(r=>r.dateResolution);if(i.length===0)return 0;let t=i.reduce((r,n)=>{if(n.dateResolution&&n.dateCreation){let o=n.dateResolution.getTime()-n.dateCreation.getTime();return r+o/(1e3*60*60)}return r},0);return Math.round(t/i.length*100)/100}static \u0275fac=function(i){return new(i||E)};static \u0275prov=p({token:E,factory:E.\u0275fac,providedIn:"root"})};export{I as a,N as b,g as c,U as d,C as e,O as f,f as g};
