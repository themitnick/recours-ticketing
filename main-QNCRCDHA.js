import{a as Ze,b as ce,c as $e,d as A,e as U,f as et,g as tt,h as L,i as F}from"./chunk-56AGBO7K.js";import{a as it,b as nt,c as we,d as rt,e as me,f as ee,g as te}from"./chunk-PV6U5WT5.js";import{a as ot}from"./chunk-GGN3SA2B.js";import{$a as Ke,$b as q,Aa as T,Da as N,Fa as Qe,L as Ce,Na as W,Oa as C,Ob as _e,P as je,Pa as b,Pb as ae,Qa as ze,Qb as le,Ra as O,Sa as V,Sb as se,Ta as v,Tb as ye,Ua as e,V as E,Va as t,Vb as M,W as S,Wa as d,X as m,Xa as R,Y as f,Ya as I,Za as xe,_a as k,a as Ee,ab as x,ac as Q,b as Se,bb as be,bc as de,ca as qe,cb as u,cc as pe,dc as K,ec as ue,gb as Xe,gc as ie,hc as ne,ib as P,ic as re,jb as D,kb as r,lb as p,lc as ge,m as Be,mb as g,mc as j,nb as Z,nc as Te,ob as _,pb as y,q as We,qa as a,qb as w,rb as oe,sb as Je,tb as $,ua as h,ub as z,vb as H,yb as Ye}from"./chunk-I6GMZB6S.js";function st(l,n){if(l&1&&(e(0,"div",26)(1,"div",27)(2,"div",28),m(),e(3,"svg",29),d(4,"path",30),t()(),f(),e(5,"div",31),r(6,"TOTAL"),t()(),e(7,"div",32),r(8),t(),e(9,"div",33),r(10,"Recours enregistr\xE9s"),t(),e(11,"div",34),m(),e(12,"svg",35),d(13,"path",36),t(),r(14," +12% ce mois "),t()(),f(),e(15,"div",26)(16,"div",27)(17,"div",37),m(),e(18,"svg",29),d(19,"path",11),t()(),f(),e(20,"div",31),r(21,"EN COURS"),t()(),e(22,"div",38),r(23),t(),e(24,"div",33),r(25,"Recours en traitement"),t(),e(26,"div",34),m(),e(27,"svg",35),d(28,"path",36),t(),r(29," +8% cette semaine "),t()()),l&2){let i=u();a(8),p(i.totalRecours),a(15),p(i.recoursEnCours)}}function ct(l,n){if(l&1&&(e(0,"div",26)(1,"div",27)(2,"div",39),m(),e(3,"svg",29),d(4,"path",40),t()(),f(),e(5,"div",31),r(6,"TICKETS"),t()(),e(7,"div",41),r(8),t(),e(9,"div",33),r(10,"Tickets ouverts"),t(),e(11,"div",42),m(),e(12,"svg",35),d(13,"path",43),t(),r(14," -5% ce mois "),t()(),f(),e(15,"div",26)(16,"div",27)(17,"div",44),m(),e(18,"svg",29),d(19,"path",45),t()(),f(),e(20,"div",31),r(21,"R\xC9SOLUS"),t()(),e(22,"div",46),r(23),t(),e(24,"div",33),r(25,"Tickets ferm\xE9s"),t(),e(26,"div",34),m(),e(27,"svg",35),d(28,"path",36),t(),r(29," +15% ce mois "),t()()),l&2){let i=u();a(8),p(i.totalTickets),a(15),p(i.ticketsResolus)}}function mt(l,n){l&1&&(m(),e(0,"svg",49),d(1,"path",30),t())}function dt(l,n){l&1&&(m(),e(0,"svg",50),d(1,"path",40),t())}function pt(l,n){if(l&1&&(e(0,"div",14)(1,"div",47)(2,"div",48),C(3,mt,2,0,":svg:svg",49)(4,dt,2,0,":svg:svg",50),t()(),e(5,"div",51)(6,"p",52),r(7),t(),e(8,"p",53),r(9),t(),e(10,"p",54),r(11),t()()()),l&2){let i,o=n.$implicit;a(3),b((i=o.type)==="recours"?3:i==="ticket"?4:-1),a(4),p(o.action),a(2),p(o.details),a(2),g("Il y a ",o.time)}}function ut(l,n){l&1&&(m(),e(0,"svg",57),d(1,"path",16),t())}function gt(l,n){l&1&&(m(),e(0,"svg",58),d(1,"path",16),t())}function vt(l,n){l&1&&(m(),e(0,"svg",59),d(1,"path",65),t())}function ft(l,n){l&1&&(m(),e(0,"svg",60),d(1,"path",45),t())}function ht(l,n){if(l&1&&(e(0,"div",55)(1,"div",56)(2,"div",47),C(3,ut,2,0,":svg:svg",57)(4,gt,2,0,":svg:svg",58)(5,vt,2,0,":svg:svg",59)(6,ft,2,0,":svg:svg",60),t(),e(7,"div",61)(8,"h4",62),r(9),t(),e(10,"p",63),r(11),t(),e(12,"p",64),r(13),z(14,"date"),t()()()()),l&2){let i,o=n.$implicit,c=u();D(c.getAlerteClass(o.type)),a(3),b((i=o.type)==="urgent"?3:i==="warning"?4:i==="info"?5:i==="success"?6:-1),a(6),p(c.getAlertTitle(o.type)),a(2),p(o.message),a(2),p(H(14,6,o.date,"dd/MM \xE0 HH:mm"))}}function xt(l,n){l&1&&(e(0,"button",20),m(),e(1,"svg",24),d(2,"path",66),t(),r(3," Nouveau recours "),t())}function Et(l,n){l&1&&(e(0,"button",21),m(),e(1,"svg",24),d(2,"path",40),t(),r(3," Nouveau ticket "),t())}function St(l,n){l&1&&(e(0,"button",22),m(),e(1,"svg",24),d(2,"path",67),t(),r(3," Voir rapports "),t())}var Me=class l{constructor(n,i,o){this.recoursService=n;this.ticketService=i;this.authService=o}currentUser=null;UserRole=me;currentDate=new Date;totalRecours=0;totalTickets=0;recoursEnCours=0;ticketsEnCours=0;ticketsResolus=0;recoursUrgents=0;ticketsCritiques=0;recoursParStatut=[];ticketsParType=[];recoursParCanal=[];activitesRecentes=[];demandesATraiter=[];alertes=[{type:"warning",message:"3 recours approchent de leur \xE9ch\xE9ance",date:new Date},{type:"info",message:"Maintenance programm\xE9e ce weekend",date:new Date},{type:"error",message:"2 tickets critiques non assign\xE9s",date:new Date}];ngOnInit(){this.authService.currentUser$.subscribe(n=>{this.currentUser=n}),this.loadDashboardData()}loadDashboardData(){this.recoursService.getStatistiques().subscribe(n=>{this.totalRecours=n.total,this.recoursEnCours=n.enCours,this.recoursUrgents=n.nouveau,this.recoursParStatut=Object.entries(n.parCanal||{}).map(([i,o])=>({label:this.getStatutLabel(i),value:o,color:this.getStatutColor(i)})),this.recoursParCanal=Object.entries(n.parCanal||{}).map(([i,o])=>({label:this.getCanalLabel(i),value:o,color:this.getCanalColor(i)}))}),this.ticketService.getStatistiques().subscribe(n=>{this.totalTickets=n.total,this.ticketsEnCours=n.enCours,this.ticketsCritiques=n.nouveau,this.ticketsParType=Object.entries(n.parType||{}).map(([i,o])=>({label:this.getTypeLabel(i),value:o,color:this.getTypeColor(i)}))}),this.activitesRecentes=[{type:"recours",action:"Nouveau recours cr\xE9\xE9",details:"REC-2024-001 - Litige facturation",time:"2 min"},{type:"ticket",action:"Ticket r\xE9solu",details:"TKT-2024-003 - Probl\xE8me VPN",time:"15 min"},{type:"recours",action:"Recours assign\xE9",details:"REC-2024-002 - Agent Marie Dupont",time:"1h"},{type:"ticket",action:"Nouveau ticket",details:"TKT-2024-004 - Panne imprimante",time:"2h"}],this.chargerDemandesATraiter()}chargerDemandesATraiter(){this.currentUser&&((this.currentUser.role==="SUPERVISEUR_RECOURS"||this.currentUser.role==="ADMIN")&&this.demandesATraiter.push({id:1,numero:"REC-2024-001",type:"recours",typeRecours:"CONTESTER_DECISION",titre:"Contestation d\xE9cision p\xE9nalit\xE9",description:"Demande de recours concernant une p\xE9nalit\xE9 de retard jug\xE9e excessive",demandeur:"Jean Kouassi",dateCreation:new Date(Date.now()-2*24*60*60*1e3),statut:"EN_COURS",priorite:"HAUTE",montantConteste:75e4,assigneA:this.currentUser.email},{id:2,numero:"REC-2024-002",type:"recours",typeRecours:"DEMANDE_REMBOURSEMENT",titre:"Demande de remboursement",description:"Remboursement suite \xE0 un trop-per\xE7u identifi\xE9 lors du contr\xF4le",demandeur:"Marie Aya",dateCreation:new Date(Date.now()-1*24*60*60*1e3),statut:"EN_COURS",priorite:"NORMALE",montantConteste:25e4,assigneA:this.currentUser.email}),(this.currentUser.role==="SUPERVISEUR_IT"||this.currentUser.role==="ADMIN")&&this.demandesATraiter.push({id:3,numero:"TKT-2024-001",type:"ticket",titre:"Probl\xE8me acc\xE8s syst\xE8me comptable",description:"Impossible de se connecter au syst\xE8me comptable depuis ce matin",demandeur:"Paul Bamba",dateCreation:new Date(Date.now()-4*60*60*1e3),statut:"EN_COURS",priorite:"CRITIQUE",typeTicket:"PROBLEME_TECHNIQUE",assigneA:this.currentUser.email},{id:4,numero:"TKT-2024-002",type:"ticket",titre:"Demande nouveau compte utilisateur",description:"Cr\xE9ation compte pour nouvel employ\xE9 du service comptabilit\xE9",demandeur:"RH Service",dateCreation:new Date(Date.now()-6*60*60*1e3),statut:"EN_COURS",priorite:"NORMALE",typeTicket:"DEMANDE_ACCES",assigneA:this.currentUser.email}))}getStatutLabel(n){return{NOUVEAU:"Nouveau",EN_COURS:"En cours",RESOLU:"R\xE9solu",FERME:"Ferm\xE9"}[n]||n}getStatutColor(n){return{NOUVEAU:"#ef4444",EN_COURS:"#f59e0b",RESOLU:"#10b981",FERME:"#6b7280"}[n]||"#6b7280"}getCanalLabel(n){return{SITE_WEB:"Site Web",TELEPHONE:"T\xE9l\xE9phone",EMAIL:"Email",PHYSIQUE:"Physique",WHATSAPP:"WhatsApp",FACEBOOK:"Facebook",TWITTER:"Twitter"}[n]||n}getCanalColor(n){return{SITE_WEB:"#3b82f6",TELEPHONE:"#10b981",EMAIL:"#f59e0b",PHYSIQUE:"#8b5cf6",WHATSAPP:"#059669",FACEBOOK:"#1d4ed8",TWITTER:"#0ea5e9"}[n]||"#6b7280"}getTypeLabel(n){return{PANNE_MATERIEL:"Panne mat\xE9riel",PROBLEME_LOGICIEL:"Probl\xE8me logiciel",DEMANDE_ACCES:"Demande d'acc\xE8s",INSTALLATION:"Installation",FORMATION:"Formation",MAINTENANCE:"Maintenance",AUTRE:"Autre"}[n]||n}getTypeColor(n){return{PANNE_MATERIEL:"#ef4444",PROBLEME_LOGICIEL:"#f59e0b",DEMANDE_ACCES:"#3b82f6",INSTALLATION:"#10b981",FORMATION:"#8b5cf6",MAINTENANCE:"#f97316",AUTRE:"#6b7280"}[n]||"#6b7280"}getAlertIcon(n){switch(n){case"error":return"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.732 16.5c-.77.833.192 2.5 1.732 2.5z";case"warning":return"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z";case"info":return"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z";default:return"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}}getAlertColor(n){switch(n){case"error":return"text-red-500";case"warning":return"text-yellow-500";case"info":return"text-blue-500";default:return"text-gray-500"}}canViewReports(){return this.authService.hasAnyRole(["ADMIN","SUPERVISEUR_RECOURS","SUPERVISEUR_IT"])}getAlerteClass(n){switch(n){case"urgent":return"bg-danger-50 border-danger-200";case"warning":return"bg-warning-50 border-warning-200";case"info":return"bg-blue-50 border-blue-200";case"success":return"bg-success-50 border-success-200";default:return"bg-gray-50 border-gray-200"}}getAlertTitle(n){switch(n){case"urgent":return"Alerte urgente";case"warning":return"Attention requise";case"info":return"Information";case"success":return"Succ\xE8s";default:return"Notification"}}isSuperviseur(){return this.currentUser?.role==="SUPERVISEUR_RECOURS"||this.currentUser?.role==="SUPERVISEUR_IT"||this.currentUser?.role==="ADMIN"}canManageRecours(){return this.currentUser?.role==="SUPERVISEUR_RECOURS"||this.currentUser?.role==="ADMIN"||this.currentUser?.role==="UTILISATEUR"}canManageTickets(){return this.currentUser?.role==="SUPERVISEUR_IT"||this.currentUser?.role==="ADMIN"||this.currentUser?.role==="UTILISATEUR"}ouvrirTraitement(n){n.type==="recours"?window.location.href=`/recours/${n.id}/traitement`:n.type==="ticket"&&(window.location.href=`/tickets/${n.id}/traitement`)}getPrioriteColor(n){return{CRITIQUE:"text-red-600 bg-red-100",HAUTE:"text-orange-600 bg-orange-100",NORMALE:"text-blue-600 bg-blue-100",BASSE:"text-gray-600 bg-gray-100"}[n]||"text-gray-600 bg-gray-100"}getPrioriteIcon(n){return{CRITIQUE:"\u{1F534}",HAUTE:"\u{1F7E0}",NORMALE:"\u{1F535}",BASSE:"\u26AA"}[n]||"\u26AA"}static \u0275fac=function(i){return new(i||l)(h(ee),h(te),h(F))};static \u0275cmp=T({type:l,selectors:[["app-dashboard"]],decls:46,vars:9,consts:[[1,"dashboard","bg-gray-50","min-h-screen","p-6"],[1,"bg-gradient-to-r","from-primary-600","to-primary-700","text-white","p-8","rounded-2xl","mb-8","shadow-soft"],[1,"text-4xl","font-bold"],[1,"text-primary-100","mt-2","text-lg"],[1,"mt-4","text-sm","text-primary-200"],[1,"stats-grid","mb-8"],[1,"dashboard-grid","mb-8"],[1,"card"],[1,"card-header"],[1,"text-lg","font-semibold","text-gray-900","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-primary-600","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"card-body"],[1,"space-y-4"],[1,"flex","items-start","space-x-3","p-3","rounded-lg","hover:bg-gray-50","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-warning-600","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"p-4","rounded-lg","border-l-4",3,"class"],[1,"text-lg","font-semibold","text-gray-900"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4"],["routerLink","/recours/nouveau",1,"btn","btn-primary","btn-lg","group"],["routerLink","/tickets/nouveau",1,"btn","btn-secondary","btn-lg","group"],["routerLink","/rapports",1,"btn","btn-warning","btn-lg","group"],[1,"btn","btn-success","btn-lg","group"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","mr-2","group-hover:scale-110","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"],[1,"stat-card","group","hover:scale-105","transition-transform","duration-200"],[1,"stat-card-header"],[1,"p-3","rounded-xl","bg-primary-100","text-primary-600","group-hover:bg-primary-600","group-hover:text-white","transition-colors","duration-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"stat-card-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-sm","text-gray-500","font-medium"],[1,"stat-card-value","text-primary-600"],[1,"stat-card-label"],[1,"stat-card-change","positive"],["fill","currentColor","viewBox","0 0 20 20",1,"h-3","w-3","mr-1"],["fill-rule","evenodd","d","M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z","clip-rule","evenodd"],[1,"p-3","rounded-xl","bg-warning-100","text-warning-600","group-hover:bg-warning-600","group-hover:text-white","transition-colors","duration-200"],[1,"stat-card-value","text-warning-600"],[1,"p-3","rounded-xl","bg-blue-100","text-blue-600","group-hover:bg-blue-600","group-hover:text-white","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"],[1,"stat-card-value","text-blue-600"],[1,"stat-card-change","negative"],["fill-rule","evenodd","d","M16.707 10.293a1 1 0 010 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 111.414-1.414L9 14.586V3a1 1 0 012 0v11.586l4.293-4.293a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"p-3","rounded-xl","bg-success-100","text-success-600","group-hover:bg-success-600","group-hover:text-white","transition-colors","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"stat-card-value","text-success-600"],[1,"flex-shrink-0"],[1,"h-8","w-8","rounded-full","bg-primary-100","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","text-primary-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","text-blue-600"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"text-xs","text-gray-400","mt-1"],[1,"p-4","rounded-lg","border-l-4"],[1,"flex"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-danger-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-warning-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-blue-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-success-600"],[1,"ml-3"],[1,"text-sm","font-medium"],[1,"text-sm","text-gray-600","mt-1"],[1,"text-xs","text-gray-400","mt-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"]],template:function(i,o){i&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"Tableau de bord"),t(),e(4,"p",3),r(5,"Vue d'ensemble de l'activit\xE9 ANARE-CI"),t(),e(6,"div",4),r(7),z(8,"date"),t()(),e(9,"div",5),C(10,st,30,2),C(11,ct,30,2),t(),e(12,"div",6)(13,"div",7)(14,"div",8)(15,"h3",9),m(),e(16,"svg",10),d(17,"path",11),t(),r(18," Activit\xE9s r\xE9centes "),t()(),f(),e(19,"div",12)(20,"div",13),O(21,pt,12,4,"div",14,ze),t()()(),e(23,"div",7)(24,"div",8)(25,"h3",9),m(),e(26,"svg",15),d(27,"path",16),t(),r(28," Alertes importantes "),t()(),f(),e(29,"div",12)(30,"div",13),O(31,ht,15,9,"div",17,ze),t()()()(),e(33,"div",7)(34,"div",8)(35,"h3",18),r(36,"Actions rapides"),t()(),e(37,"div",12)(38,"div",19),C(39,xt,4,0,"button",20),C(40,Et,4,0,"button",21),C(41,St,4,0,"button",22),e(42,"button",23),m(),e(43,"svg",24),d(44,"path",25),t(),r(45," Aide & Support "),t()()()()()),i&2&&(a(7),g(" Derni\xE8re mise \xE0 jour : ",H(8,6,o.currentDate,"dd/MM/yyyy \xE0 HH:mm")," "),a(3),b(o.canManageRecours()?10:-1),a(),b(o.canManageTickets()?11:-1),a(10),V(o.activitesRecentes),a(10),V(o.alertes),a(8),b(o.canManageRecours()?39:-1),a(),b(o.canManageTickets()?40:-1),a(),b(o.canViewReports()?41:-1))},dependencies:[M,L,U,se],styles:[".dashboard[_ngcontent-%COMP%]{min-height:calc(100vh - 7rem)}"]})};var Ct=l=>["/recours",l],bt=(l,n)=>n.id;function _t(l,n){l&1&&(e(0,"div",28),m(),e(1,"svg",31),d(2,"path",32),t(),f(),e(3,"p",33),r(4,"Aucun recours trouv\xE9"),t(),e(5,"p",34),r(6,"Essayez de modifier vos crit\xE8res de recherche"),t()())}function yt(l,n){if(l&1&&(e(0,"div",47)(1,"p",45),r(2,"Montant du litige"),t(),e(3,"p",46),r(4),z(5,"number"),t()()),l&2){let i=u().$implicit;a(4),g("",H(5,1,i.montantLitige,"1.0-0")," FCFA")}}function wt(l,n){if(l&1&&(e(0,"div",47)(1,"p",45),r(2,"Assign\xE9 \xE0"),t(),e(3,"p",46),r(4),t()()),l&2){let i=u().$implicit;a(4),p(i.assigneA)}}function Tt(l,n){if(l&1&&(e(0,"div",50),m(),e(1,"svg",51),d(2,"path",52),t(),f(),e(3,"span",53),r(4),t()()),l&2){let i=u().$implicit,o=u(2);a(4),g("\xC9ch\xE9ance: ",o.formatDate(i.dateEcheance))}}function Mt(l,n){if(l&1&&(e(0,"div",36)(1,"div",37)(2,"div",38)(3,"div",39)(4,"h3",40),r(5),t(),e(6,"span",41),r(7),t()(),e(8,"div",42)(9,"a",43),r(10," Voir d\xE9tails "),t()()(),e(11,"div",44)(12,"div")(13,"p",45),r(14,"Requ\xE9rant"),t(),e(15,"p",46),r(16),t()(),e(17,"div")(18,"p",45),r(19,"Type"),t(),e(20,"p",46),r(21),t()(),e(22,"div")(23,"p",45),r(24,"Canal"),t(),e(25,"p",46),r(26),t()(),e(27,"div")(28,"p",45),r(29,"Date cr\xE9ation"),t(),e(30,"p",46),r(31),t()()(),e(32,"div",47)(33,"p",48),r(34,"Description"),t(),e(35,"p",49),r(36),t()(),C(37,yt,6,4,"div",47),C(38,wt,5,1,"div",47),C(39,Tt,5,1,"div",50),t()()),l&2){let i=n.$implicit,o=u(2);D(o.getUrgencyClass(i)),a(5),p(i.numeroRecours),a(),D(o.getStatutBadgeClass(i.statut)),a(),g(" ",o.getStatutLabel(i.statut)," "),a(2),v("routerLink",$(16,Ct,i.id)),a(7),Z("",i.requrantPrenom," ",i.requrantNom),a(5),p(o.getTypeLabel(i.typeRecours)),a(5),p(o.getCanalLabel(i.canalEntree)),a(5),p(o.formatDate(i.dateCreation)),a(5),p(i.description),a(),b(i.montantLitige?37:-1),a(),b(i.assigneA?38:-1),a(),b(i.dateEcheance?39:-1)}}function kt(l,n){if(l&1&&O(0,Mt,40,18,"div",35,bt),l&2){let i=u();V(i.filteredRecours)}}var ke=class l{constructor(n){this.recoursService=n}recours=[];filteredRecours=[];searchTerm="";statusFilter="";typeFilter="";canalFilter="";StatutRecours=it;TypeRecours=we;CanalEntree=rt;ngOnInit(){this.loadRecours()}loadRecours(){this.recoursService.getAllRecours().subscribe(n=>{this.recours=n,this.applyFilters()})}applyFilters(){this.filteredRecours=this.recours.filter(n=>{let i=!this.searchTerm||n.numeroRecours.toLowerCase().includes(this.searchTerm.toLowerCase())||n.requrantNom.toLowerCase().includes(this.searchTerm.toLowerCase())||n.requrantPrenom.toLowerCase().includes(this.searchTerm.toLowerCase())||n.description.toLowerCase().includes(this.searchTerm.toLowerCase()),o=!this.statusFilter||n.statut===this.statusFilter,c=!this.typeFilter||n.typeRecours===this.typeFilter,s=!this.canalFilter||n.canalEntree===this.canalFilter;return i&&o&&c&&s})}onSearchChange(){this.applyFilters()}onFilterChange(){this.applyFilters()}clearFilters(){this.searchTerm="",this.statusFilter="",this.typeFilter="",this.canalFilter="",this.applyFilters()}getStatutBadgeClass(n){switch(n){case"SOUMIS":return"bg-red-100 text-red-800";case"EN_COURS_TRAITEMENT":return"bg-yellow-100 text-yellow-800";case"ATTENTE_INFORMATIONS":return"bg-blue-100 text-blue-800";case"RESOLU":return"bg-green-100 text-green-800";case"FERME":return"bg-gray-100 text-gray-800";case"REJETE":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}getStatutLabel(n){switch(n){case"SOUMIS":return"Nouveau";case"EN_COURS_TRAITEMENT":return"En cours";case"ATTENTE_INFORMATIONS":return"En attente";case"RESOLU":return"R\xE9solu";case"FERME":return"Ferm\xE9";case"REJETE":return"Rejet\xE9";default:return n}}getTypeLabel(n){switch(n){case"LITIGE_FACTURATION":return"Litige facturation";case"QUALITE_SERVICE":return"Qualit\xE9 service";case"COUPURE_ABUSIVE":return"Coupure abusive";case"RACCORDEMENT":return"Raccordement";case"AUTRE":return"Autre";default:return n}}getCanalLabel(n){switch(n){case"SITE_WEB":return"Site Web";case"TELEPHONE":return"T\xE9l\xE9phone";case"EMAIL":return"Email";case"PHYSIQUE":return"Physique";case"WHATSAPP":return"WhatsApp";case"FACEBOOK":return"Facebook";case"TWITTER":return"Twitter";default:return n}}formatDate(n){return new Date(n).toLocaleDateString("fr-FR")}getUrgencyClass(n){let i=new Date,o=new Date(n.dateEcheance||n.dateCreation),c=Math.ceil((o.getTime()-i.getTime())/(1e3*3600*24));return c<0?"border-l-4 border-red-500":c<=2?"border-l-4 border-orange-500":c<=7?"border-l-4 border-yellow-500":"border-l-4 border-green-500"}static \u0275fac=function(i){return new(i||l)(h(ee))};static \u0275cmp=T({type:l,selectors:[["app-recours-list"]],decls:60,vars:6,consts:[[1,"recours-list"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],["routerLink","/recours/nouveau",1,"btn","btn-primary"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"card","p-6","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-5","gap-4"],[1,"lg:col-span-2"],[1,"form-label"],["type","text","placeholder","Num\xE9ro, nom, description...",1,"form-input",3,"ngModelChange","input","ngModel"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],["value","NOUVEAU"],["value","EN_COURS"],["value","EN_ATTENTE"],["value","RESOLU"],["value","FERME"],["value","REJETE"],["value","LITIGE_FACTURATION"],["value","QUALITE_SERVICE"],["value","COUPURE_ABUSIVE"],["value","RACCORDEMENT"],["value","AUTRE"],[1,"flex","items-end"],[1,"btn","btn-secondary","w-full",3,"click"],[1,"space-y-4"],[1,"card","p-12","text-center"],[1,"mt-8","flex","items-center","justify-between"],[1,"text-sm","text-gray-700"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-gray-400","mx-auto","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-gray-500","text-lg","font-medium"],[1,"text-gray-400","mt-1"],[1,"card","hover:shadow-lg","transition-shadow","duration-200",3,"class"],[1,"card","hover:shadow-lg","transition-shadow","duration-200"],[1,"p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"flex","items-center","space-x-4"],[1,"text-lg","font-semibold","text-gray-900"],[1,"px-2","py-1","text-xs","font-medium","rounded-full"],[1,"flex","items-center","space-x-2"],[1,"text-primary-600","hover:text-primary-700","font-medium","text-sm",3,"routerLink"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4","mb-4"],[1,"text-sm","text-gray-600"],[1,"font-medium","text-gray-900"],[1,"mb-4"],[1,"text-sm","text-gray-600","mb-1"],[1,"text-gray-900","text-sm"],[1,"flex","items-center","text-sm"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-gray-600"]],template:function(i,o){i&1&&(e(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),r(4,"Gestion des Recours"),t(),e(5,"p",3),r(6),t()(),e(7,"a",4),m(),e(8,"svg",5),d(9,"path",6),t(),r(10," Nouveau Recours "),t()(),f(),e(11,"div",7)(12,"div",8)(13,"div",9)(14,"label",10),r(15,"Recherche"),t(),e(16,"input",11),w("ngModelChange",function(s){return y(o.searchTerm,s)||(o.searchTerm=s),s}),x("input",function(){return o.onSearchChange()}),t()(),e(17,"div")(18,"label",10),r(19,"Statut"),t(),e(20,"select",12),w("ngModelChange",function(s){return y(o.statusFilter,s)||(o.statusFilter=s),s}),x("change",function(){return o.onFilterChange()}),e(21,"option",13),r(22,"Tous les statuts"),t(),e(23,"option",14),r(24,"Nouveau"),t(),e(25,"option",15),r(26,"En cours"),t(),e(27,"option",16),r(28,"En attente"),t(),e(29,"option",17),r(30,"R\xE9solu"),t(),e(31,"option",18),r(32,"Ferm\xE9"),t(),e(33,"option",19),r(34,"Rejet\xE9"),t()()(),e(35,"div")(36,"label",10),r(37,"Type"),t(),e(38,"select",12),w("ngModelChange",function(s){return y(o.typeFilter,s)||(o.typeFilter=s),s}),x("change",function(){return o.onFilterChange()}),e(39,"option",13),r(40,"Tous les types"),t(),e(41,"option",20),r(42,"Litige facturation"),t(),e(43,"option",21),r(44,"Qualit\xE9 service"),t(),e(45,"option",22),r(46,"Coupure abusive"),t(),e(47,"option",23),r(48,"Raccordement"),t(),e(49,"option",24),r(50,"Autre"),t()()(),e(51,"div",25)(52,"button",26),x("click",function(){return o.clearFilters()}),r(53," R\xE9initialiser "),t()()()(),e(54,"div",27),C(55,_t,7,0,"div",28)(56,kt,2,0),t(),e(57,"div",29)(58,"p",30),r(59),t()()()),i&2&&(a(6),g("",o.filteredRecours.length," recours au total"),a(10),_("ngModel",o.searchTerm),a(4),_("ngModel",o.statusFilter),a(18),_("ngModel",o.typeFilter),a(17),b(o.filteredRecours.length===0?55:56),a(4),g(" Affichage de ",o.filteredRecours.length," recours "))},dependencies:[M,L,U,j,ne,re,q,ie,Q,K,ye],styles:[".recours-list[_ngcontent-%COMP%]{min-height:calc(100vh - 7rem)}.border-l-4[_ngcontent-%COMP%]{border-left-width:4px}"]})};var Rt=l=>["/recours",l,"traitement"];function It(l,n){if(l&1&&(e(0,"div",34)(1,"button",35),m(),e(2,"svg",36),d(3,"path",37),t(),r(4," \u{1F50D} Traitement du recours "),t()()),l&2){let i=u(2);a(),v("routerLink",$(1,Rt,i.recours.id))}}function Dt(l,n){if(l&1){let i=k();e(0,"div",1)(1,"div",2)(2,"div")(3,"button",3),x("click",function(){E(i);let c=u();return S(c.goBack())}),m(),e(4,"svg",4),d(5,"path",5),t(),r(6," Retour \xE0 la liste "),t(),f(),e(7,"h1",6),r(8),t(),e(9,"p",7),r(10,"Consultation du d\xE9tail et traitement du recours"),t()(),N(11,It,5,3,"div",8),t(),e(12,"div",9)(13,"div",10)(14,"div",11),m(),e(15,"svg",12),d(16,"path",13),t()(),f(),e(17,"div")(18,"h2",14),r(19,"\u{1F4CB} R\xE9sum\xE9 du Recours"),t(),e(20,"p",15),r(21),t()(),e(22,"div",16)(23,"span"),r(24),t()()(),e(25,"div",17)(26,"div")(27,"p",18),r(28,"\u{1F464} Requ\xE9rant"),t(),e(29,"p",19),r(30),t(),e(31,"p",20),r(32),t()(),e(33,"div")(34,"p",18),r(35,"\u{1F4C5} Dates importantes"),t(),e(36,"p",19),r(37),z(38,"date"),t(),e(39,"p",20),r(40),z(41,"date"),t()(),e(42,"div")(43,"p",18),r(44,"\u{1F4B0} Montant litige"),t(),e(45,"p",21),r(46),z(47,"number"),t()()(),e(48,"div",22)(49,"p",23),r(50,"\u{1F4DD} Description"),t(),e(51,"p",19),r(52),t()()(),e(53,"div",24)(54,"h2",25),m(),e(55,"svg",26),d(56,"path",27),t(),r(57," Informations d\xE9taill\xE9es "),t(),f(),e(58,"div",28)(59,"div")(60,"p",29),r(61,"Requ\xE9rant"),t(),e(62,"p",30),r(63),t()(),e(64,"div")(65,"p",29),r(66,"Email"),t(),e(67,"p",30),r(68),t()(),e(69,"div")(70,"p",29),r(71,"T\xE9l\xE9phone"),t(),e(72,"p",30),r(73),t()(),e(74,"div")(75,"p",29),r(76,"Type de recours"),t(),e(77,"p",30),r(78),t()(),e(79,"div")(80,"p",29),r(81,"Canal d'entr\xE9e"),t(),e(82,"p",30),r(83),t()(),e(84,"div")(85,"p",29),r(86,"Statut"),t(),e(87,"span"),r(88),t()()(),e(89,"div",31)(90,"p",32),r(91,"Description compl\xE8te"),t(),e(92,"p",33),r(93),t()()()()}if(l&2){let i=u();a(8),g("\u{1F4CB} Recours ",i.recours.numeroRecours),a(3),v("ngIf",i.canProcessRecours()),a(10),Z("",i.recours.typeRecours," \u2022 ",i.recours.canalEntree),a(2),D(oe("px-3 py-1 text-sm font-medium rounded-full ",i.getStatutColor(i.recours.statut))),a(),g(" ",i.recours.statut," "),a(6),Z("",i.recours.requrantPrenom," ",i.recours.requrantNom),a(2),p(i.recours.requrantEmail),a(5),g("Cr\xE9\xE9 le ",H(38,26,i.recours.dateCreation,"dd/MM/yyyy")),a(3),g("\xC9ch\xE9ance ",H(41,29,i.recours.dateEcheance,"dd/MM/yyyy")),a(6),g("",H(47,32,i.recours.montantLitige,"1.0-0")," FCFA"),a(6),p(i.recours.description),a(11),Z("",i.recours.requrantPrenom," ",i.recours.requrantNom),a(5),p(i.recours.requrantEmail),a(5),p(i.recours.requrantTelephone),a(5),p(i.recours.typeRecours),a(5),p(i.recours.canalEntree),a(4),D(oe("px-2 py-1 text-xs font-medium rounded-full ",i.getStatutColor(i.recours.statut))),a(),g(" ",i.recours.statut," "),a(5),p(i.recours.description)}}var Ie=class l{constructor(n,i,o,c){this.route=n;this.router=i;this.recoursService=o;this.authService=c}recours;currentUser=null;ngOnInit(){this.currentUser=this.authService.getCurrentUser();let n=this.route.snapshot.paramMap.get("id");n&&this.recoursService.getRecoursById(n).subscribe(i=>{this.recours=i})}goBack(){this.router.navigate(["/recours"])}canProcessRecours(){return this.currentUser?this.currentUser.role==="SUPERVISEUR_RECOURS"||this.currentUser.role==="ADMIN"||this.currentUser.role==="AGENT_RECOURS":!1}getStatutColor(n){return{NOUVEAU:"bg-red-100 text-red-800",EN_COURS:"bg-yellow-100 text-yellow-800",EN_ATTENTE_VALIDATION:"bg-blue-100 text-blue-800",VALIDE:"bg-green-100 text-green-800",REJETE:"bg-red-100 text-red-800",SUSPENDU:"bg-gray-100 text-gray-800",FERME:"bg-gray-100 text-gray-800"}[n]||"bg-gray-100 text-gray-800"}static \u0275fac=function(i){return new(i||l)(h(ce),h(A),h(ee),h(F))};static \u0275cmp=T({type:l,selectors:[["app-recours-detail"]],decls:1,vars:1,consts:[["class","recours-detail",4,"ngIf"],[1,"recours-detail"],[1,"mb-6","flex","items-center","justify-between"],[1,"text-primary-600","hover:text-primary-700","mb-4","flex","items-center",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],["class","flex space-x-3",4,"ngIf"],[1,"card","p-6","mb-6","bg-gradient-to-r","from-green-50","to-emerald-50","border-green-200"],[1,"flex","items-center","mb-4"],[1,"p-2","bg-green-100","rounded-lg","mr-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-lg","font-semibold","text-green-900"],[1,"text-sm","text-green-700"],[1,"ml-auto"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","text-sm"],[1,"text-green-600","font-medium"],[1,"text-green-900"],[1,"text-green-700"],[1,"text-green-900","text-lg","font-bold"],[1,"mt-4","pt-4","border-t","border-green-200"],[1,"text-green-600","font-medium","mb-2"],[1,"card","p-6"],[1,"text-lg","font-semibold","mb-4","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"text-sm","text-gray-600"],[1,"font-medium"],[1,"mt-6"],[1,"text-sm","text-gray-600","mb-2"],[1,"text-gray-900","bg-gray-50","p-4","rounded-lg"],[1,"flex","space-x-3"],[1,"inline-flex","items-center","px-4","py-2","border","border-blue-300","text-sm","font-medium","rounded-md","text-blue-700","bg-blue-50","hover:bg-blue-100","transition-colors",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"]],template:function(i,o){i&1&&N(0,Dt,94,35,"div",0),i&2&&v("ngIf",o.recours)},dependencies:[M,le,L,U,ye,se],styles:[".recours-detail[_ngcontent-%COMP%]{min-height:calc(100vh - 7rem)}"]})};var De=class l{maxFileSize=10*1024*1024;allowedTypes=["image/jpeg","image/png","image/gif","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain"];constructor(){}validateFile(n){return n.size>this.maxFileSize?{valid:!1,error:"Le fichier est trop volumineux (max 10MB)"}:this.allowedTypes.includes(n.type)?{valid:!0}:{valid:!1,error:"Type de fichier non autoris\xE9"}}uploadFile(n,i){let o={id:this.generateId(),nom:n.name,taille:n.size,type:n.type,url:URL.createObjectURL(n),dateUpload:new Date,uploadePar:i};return Be(o)}downloadFile(n){if(n.url){let i=document.createElement("a");i.href=n.url,i.download=n.nom,i.click()}}deleteFile(n){return Be(!0)}getFileIcon(n){return n.startsWith("image/")?"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z":n==="application/pdf"||n.includes("word")?"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z":n.includes("excel")||n.includes("sheet")?"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2 2z":"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"}formatFileSize(n){if(n===0)return"0 Bytes";let i=1024,o=["Bytes","KB","MB","GB"],c=Math.floor(Math.log(n)/Math.log(i));return parseFloat((n/Math.pow(i,c)).toFixed(2))+" "+o[c]}generateId(){return Math.random().toString(36).substr(2,9)}static \u0275fac=function(i){return new(i||l)};static \u0275prov=Ce({token:l,factory:l.\u0275fac,providedIn:"root"})};var Ut=(l,n)=>n.id;function Lt(l,n){if(l&1&&(R(0,"div",10),m(),R(1,"svg",12),xe(2,"path",13),I(),r(3),I()),l&2){let i=u();a(3),g(" ",i.errorMessage," ")}}function Ft(l,n){if(l&1){let i=k();R(0,"div",16)(1,"div",17),m(),R(2,"svg",18),xe(3,"path",19),I(),f(),R(4,"div",20)(5,"span",21),r(6),I(),R(7,"span",22),r(8),I()()(),R(9,"button",23),be("click",function(){let c=E(i).$implicit,s=u(2);return S(s.removeFile(c))}),m(),R(10,"svg",24),xe(11,"path",25),I()()()}if(l&2){let i=n.$implicit,o=u(2);a(3),W("d",o.getFileIcon(i.type)),a(3),p(i.nom),a(2),p(o.formatFileSize(i.taille))}}function Nt(l,n){if(l&1&&(R(0,"div",11)(1,"h4",14),r(2),I(),R(3,"div",15),O(4,Ft,12,3,"div",16,Ut),I()()),l&2){let i=u();a(2),g("Fichiers ajout\xE9s (",i.uploadedFiles.length,")"),a(2),V(i.uploadedFiles)}}var he=class l{constructor(n){this.fileService=n}uploadedBy="";multiple=!0;maxFiles=5;filesUploaded=new Qe;uploadedFiles=[];isDragOver=!1;errorMessage="";acceptedTypes="image/*,.pdf,.doc,.docx,.xls,.xlsx,.txt";ngOnInit(){}onDragOver(n){n.preventDefault(),this.isDragOver=!0}onDragLeave(n){n.preventDefault(),this.isDragOver=!1}onDrop(n){n.preventDefault(),this.isDragOver=!1;let i=Array.from(n.dataTransfer?.files||[]);this.processFiles(i)}onFileSelected(n){let i=Array.from(n.target.files||[]);this.processFiles(i),n.target.value=""}processFiles(n){if(this.errorMessage="",!this.multiple&&n.length>1){this.errorMessage="Un seul fichier autoris\xE9";return}if(this.uploadedFiles.length+n.length>this.maxFiles){this.errorMessage=`Maximum ${this.maxFiles} fichiers autoris\xE9s`;return}n.forEach(i=>{let o=this.fileService.validateFile(i);if(!o.valid){this.errorMessage=o.error||"Fichier invalide";return}this.fileService.uploadFile(i,this.uploadedBy).subscribe({next:c=>{this.uploadedFiles.push(c),this.filesUploaded.emit(this.uploadedFiles)},error:c=>{this.errorMessage="Erreur lors du t\xE9l\xE9chargement",console.error("Upload error:",c)}})})}removeFile(n){let i=this.uploadedFiles.findIndex(o=>o.id===n.id);i>-1&&(this.uploadedFiles.splice(i,1),this.filesUploaded.emit(this.uploadedFiles),this.fileService.deleteFile(n.id).subscribe())}getFileIcon(n){return this.fileService.getFileIcon(n)}formatFileSize(n){return this.fileService.formatFileSize(n)}static \u0275fac=function(i){return new(i||l)(h(De))};static \u0275cmp=T({type:l,selectors:[["app-file-upload"]],inputs:{uploadedBy:"uploadedBy",multiple:"multiple",maxFiles:"maxFiles"},outputs:{filesUploaded:"filesUploaded"},decls:15,vars:5,consts:[["fileInput",""],[1,"file-upload-zone"],[1,"drop-zone",3,"dragover","dragleave","drop","click"],[1,"drop-zone-content"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"drop-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"],[1,"drop-text"],[1,"drop-main"],[1,"drop-hint"],["type","file","multiple","",1,"hidden",3,"change","accept"],[1,"error-message"],[1,"uploaded-files"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"error-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"files-title"],[1,"files-list"],[1,"file-item"],[1,"file-info"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"file-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"file-details"],[1,"file-name"],[1,"file-size"],["title","Supprimer",1,"remove-btn",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"]],template:function(i,o){if(i&1){let c=k();R(0,"div",1)(1,"div",2),be("dragover",function(J){return E(c),S(o.onDragOver(J))})("dragleave",function(J){return E(c),S(o.onDragLeave(J))})("drop",function(J){return E(c),S(o.onDrop(J))})("click",function(){E(c);let J=Xe(12);return S(J.click())}),R(2,"div",3),m(),R(3,"svg",4),xe(4,"path",5),I(),f(),R(5,"p",6)(6,"span",7),r(7,"Cliquez pour s\xE9lectionner"),I(),r(8," ou glissez vos fichiers ici "),I(),R(9,"p",8),r(10,"PDF, Word, Excel, Images (max 10MB)"),I()(),R(11,"input",9,0),be("change",function(J){return E(c),S(o.onFileSelected(J))}),I()(),C(13,Lt,4,1,"div",10),C(14,Nt,6,1,"div",11),I()}i&2&&(a(),P("dragover",o.isDragOver),a(10),Ke("accept",o.acceptedTypes),a(2),b(o.errorMessage?13:-1),a(),b(o.uploadedFiles.length>0?14:-1))},dependencies:[M],styles:[".file-upload-zone[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.drop-zone[_ngcontent-%COMP%]{cursor:pointer;border-radius:.75rem;border-width:2px;border-style:dashed;--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1));padding:2rem;text-align:center;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s}.drop-zone[_ngcontent-%COMP%]:hover{--tw-border-opacity: 1;border-color:rgb(74 222 128 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.drop-zone.dragover[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(34 197 94 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.drop-zone-content[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.drop-icon[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;height:3rem;width:3rem;--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.drop-text[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.drop-main[_ngcontent-%COMP%]{font-weight:600;--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.drop-main[_ngcontent-%COMP%]:hover{--tw-text-opacity: 1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.drop-hint[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center}.error-message[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.error-message[_ngcontent-%COMP%]{border-radius:.5rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(254 202 202 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1));padding:.75rem;--tw-text-opacity: 1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.error-icon[_ngcontent-%COMP%]{height:1.25rem;width:1.25rem;flex-shrink:0;--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.uploaded-files[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.files-title[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;font-weight:600;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.files-list[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.file-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;border-radius:.5rem;border-width:1px;--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1));padding:.75rem}.file-info[_ngcontent-%COMP%]{display:flex;align-items:center}.file-info[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.75rem * var(--tw-space-x-reverse));margin-left:calc(.75rem * calc(1 - var(--tw-space-x-reverse)))}.file-icon[_ngcontent-%COMP%]{height:1.5rem;width:1.5rem;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.file-details[_ngcontent-%COMP%]{display:flex;flex-direction:column}.file-name[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.file-size[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.remove-btn[_ngcontent-%COMP%]{border-radius:9999px;padding:.25rem;--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1));transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.remove-btn[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.hidden[_ngcontent-%COMP%]{display:none}"]})};var Vt=()=>["/recours"];function Pt(l,n){l&1&&(m(),e(0,"svg",40),d(1,"circle",41)(2,"path",42),t(),r(3," Envoi en cours... "))}function Bt(l,n){l&1&&(m(),e(0,"svg",37),d(1,"path",43),t(),r(2," Soumettre le recours "))}var Ae=class l{constructor(n,i,o,c){this.recoursService=n;this.authService=i;this.router=o;this.toastService=c}TypeRecours=we;PrioriteRecours=nt;currentUser=null;isSubmitting=!1;formData={titre:"",description:"",type:"TECHNIQUE",priorite:"NORMALE",clientNom:"",clientEmail:"",clientTelephone:"",fichiers:[]};ngOnInit(){this.authService.currentUser$.subscribe(n=>{this.currentUser=n,n&&(this.formData.clientNom=`${n.prenom} ${n.nom}`,this.formData.clientEmail=n.email,this.formData.clientTelephone=n.telephone||"")})}onFilesUploaded(n){this.formData.fichiers=n}saveDraft(){console.log("Sauvegarde brouillon:",this.formData)}onSubmit(){if(!this.validateForm())return;this.isSubmitting=!0;let n=Se(Ee({},this.formData),{clientId:this.currentUser?.id});this.recoursService.creerRecours(n).subscribe({next:i=>{console.log("Recours cr\xE9\xE9:",i),this.router.navigate(["/recours",i.id])},error:i=>{console.error("Erreur cr\xE9ation recours:",i),this.isSubmitting=!1}})}validateForm(){return this.formData.titre.trim()?this.formData.description.trim()?this.formData.description.length<20?(this.toastService.error("Erreur de validation","La description doit contenir au moins 20 caract\xE8res"),!1):!0:(this.toastService.error("Erreur de validation","La description est obligatoire"),!1):(this.toastService.error("Erreur de validation","Le titre est obligatoire"),!1)}static \u0275fac=function(i){return new(i||l)(h(ee),h(F),h(A),h(Te))};static \u0275cmp=T({type:l,selectors:[["app-recours-create"]],decls:102,vars:24,consts:[[1,"recours-create","max-w-4xl","mx-auto"],[1,"mb-6"],[1,"flex","items-center","space-x-2","text-sm","text-gray-600","mb-4"],[1,"hover:text-primary-600",3,"routerLink"],[1,"text-gray-900"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-2"],[1,"space-y-8",3,"ngSubmit"],[1,"card","p-6"],[1,"text-xl","font-semibold","text-gray-900","mb-6","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","mr-2","text-primary-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"form-group","md:col-span-2"],[1,"form-label","required"],["type","text","name","titre","placeholder","D\xE9crivez bri\xE8vement votre recours...","required","",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-help"],[1,"form-group"],["name","type","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["name","priorite","required","",1,"form-select",3,"ngModelChange","ngModel"],["selected","",3,"value"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],["name","description","rows","6","placeholder","Expliquez clairement votre probl\xE8me, les circonstances, les impacts, et ce que vous attendez comme r\xE9solution...","required","",1,"form-textarea",3,"ngModelChange","ngModel"],[1,"flex","justify-between","items-center","mt-2"],[1,"text-sm","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],["type","text","name","clientNom","readonly","",1,"form-input",3,"ngModelChange","ngModel"],["type","email","name","clientEmail","readonly","",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-label"],["type","tel","name","clientTelephone","placeholder","+225 XX XX XX XX XX",1,"form-input",3,"ngModelChange","ngModel"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"],[1,"text-gray-600","mb-4"],[3,"filesUploaded","uploadedBy","multiple","maxFiles"],[1,"flex","flex-col","sm:flex-row","gap-4","pt-6","border-t","border-gray-200"],["type","button",1,"btn","btn-secondary","flex-1","sm:flex-none",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12"],["type","submit",1,"btn","btn-primary","flex-1","sm:flex-none",3,"disabled"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-5","h-5","mr-2"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 19l9 2-9-18-9 18 9-2zm0 0v-8"]],template:function(i,o){i&1&&(e(0,"div",0)(1,"div",1)(2,"nav",2)(3,"a",3),r(4,"Recours"),t(),e(5,"span"),r(6,"/"),t(),e(7,"span",4),r(8,"Nouveau recours"),t()(),e(9,"h1",5),r(10,"Cr\xE9er un nouveau recours"),t(),e(11,"p",6),r(12,"Remplissez le formulaire ci-dessous pour soumettre votre recours"),t()(),e(13,"form",7),x("ngSubmit",function(){return o.onSubmit()}),e(14,"div",8)(15,"h2",9),m(),e(16,"svg",10),d(17,"path",11),t(),r(18," Informations g\xE9n\xE9rales "),t(),f(),e(19,"div",12)(20,"div",13)(21,"label",14),r(22,"Titre du recours"),t(),e(23,"input",15),w("ngModelChange",function(s){return y(o.formData.titre,s)||(o.formData.titre=s),s}),t(),e(24,"p",16),r(25,'Soyez pr\xE9cis et concis (ex: "Contestation facture janvier 2025")'),t()(),e(26,"div",17)(27,"label",14),r(28,"Type de recours"),t(),e(29,"select",18),w("ngModelChange",function(s){return y(o.formData.type,s)||(o.formData.type=s),s}),e(30,"option",19),r(31,"S\xE9lectionnez un type"),t(),e(32,"option",20),r(33,"Facturation"),t(),e(34,"option",20),r(35,"Technique"),t(),e(36,"option",20),r(37,"Service Client"),t(),e(38,"option",20),r(39,"Commercial"),t(),e(40,"option",20),r(41,"Juridique"),t()()(),e(42,"div",17)(43,"label",14),r(44,"Priorit\xE9"),t(),e(45,"select",21),w("ngModelChange",function(s){return y(o.formData.priorite,s)||(o.formData.priorite=s),s}),e(46,"option",20),r(47,"Basse"),t(),e(48,"option",22),r(49,"Normale"),t(),e(50,"option",20),r(51,"Haute"),t(),e(52,"option",20),r(53,"Urgente"),t()()()()(),e(54,"div",8)(55,"h2",9),m(),e(56,"svg",10),d(57,"path",23),t(),r(58," Description du probl\xE8me "),t(),f(),e(59,"div",17)(60,"label",14),r(61,"D\xE9crivez votre recours en d\xE9tail"),t(),e(62,"textarea",24),w("ngModelChange",function(s){return y(o.formData.description,s)||(o.formData.description=s),s}),t(),e(63,"div",25)(64,"p",16),r(65,"Plus votre description est d\xE9taill\xE9e, plus le traitement sera rapide"),t(),e(66,"span",26),r(67),t()()()(),e(68,"div",8)(69,"h2",9),m(),e(70,"svg",10),d(71,"path",27),t(),r(72," Informations de contact "),t(),f(),e(73,"div",12)(74,"div",17)(75,"label",14),r(76,"Nom complet"),t(),e(77,"input",28),w("ngModelChange",function(s){return y(o.formData.clientNom,s)||(o.formData.clientNom=s),s}),t()(),e(78,"div",17)(79,"label",14),r(80,"Email"),t(),e(81,"input",29),w("ngModelChange",function(s){return y(o.formData.clientEmail,s)||(o.formData.clientEmail=s),s}),t()(),e(82,"div",17)(83,"label",30),r(84,"T\xE9l\xE9phone"),t(),e(85,"input",31),w("ngModelChange",function(s){return y(o.formData.clientTelephone,s)||(o.formData.clientTelephone=s),s}),t()()()(),e(86,"div",8)(87,"h2",9),m(),e(88,"svg",10),d(89,"path",32),t(),r(90," Documents justificatifs "),t(),f(),e(91,"p",33),r(92," Ajoutez tous les documents qui peuvent appuyer votre recours (factures, captures d'\xE9cran, correspondances, etc.) "),t(),e(93,"app-file-upload",34),x("filesUploaded",function(s){return o.onFilesUploaded(s)}),t()(),e(94,"div",35)(95,"button",36),x("click",function(){return o.saveDraft()}),m(),e(96,"svg",37),d(97,"path",38),t(),r(98," Sauvegarder brouillon "),t(),f(),e(99,"button",39),C(100,Pt,4,0)(101,Bt,3,0),t()()()()),i&2&&(a(3),v("routerLink",Je(23,Vt)),a(20),_("ngModel",o.formData.titre),a(6),_("ngModel",o.formData.type),a(3),v("value",o.TypeRecours.FACTURATION),a(2),v("value",o.TypeRecours.TECHNIQUE),a(2),v("value",o.TypeRecours.SERVICE_CLIENT),a(2),v("value",o.TypeRecours.COMMERCIAL),a(2),v("value",o.TypeRecours.JURIDIQUE),a(5),_("ngModel",o.formData.priorite),a(),v("value",o.PrioriteRecours.BASSE),a(2),v("value",o.PrioriteRecours.NORMALE),a(2),v("value",o.PrioriteRecours.HAUTE),a(2),v("value",o.PrioriteRecours.URGENTE),a(10),_("ngModel",o.formData.description),a(5),g("",o.formData.description.length," caract\xE8res"),a(10),_("ngModel",o.formData.clientNom),a(4),_("ngModel",o.formData.clientEmail),a(4),_("ngModel",o.formData.clientTelephone),a(8),v("uploadedBy",(o.currentUser==null?null:o.currentUser.email)||"Utilisateur")("multiple",!0)("maxFiles",10),a(6),v("disabled",o.isSubmitting),a(),b(o.isSubmitting?100:101))},dependencies:[M,j,ue,ne,re,q,ie,Q,de,ge,K,pe,L,U,he],styles:['.required[_ngcontent-%COMP%]:after{content:" *";--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.form-help[_ngcontent-%COMP%]{margin-top:.25rem;font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}']})};var zt=l=>["/tickets",l],Ht=(l,n)=>n.id;function Gt(l,n){if(l&1&&(e(0,"div",23)(1,"div",24)(2,"div",25)(3,"h3",26),r(4),t(),e(5,"span",27),r(6),t(),e(7,"span",27),r(8),t()(),e(9,"a",28),r(10," Voir d\xE9tails "),t()(),e(11,"h4",29),r(12),t(),e(13,"p",30),r(14),t(),e(15,"div",31)(16,"div")(17,"span",32),r(18,"Demandeur:"),t(),e(19,"span",33),r(20),t()(),e(21,"div")(22,"span",32),r(23,"Type:"),t(),e(24,"span",33),r(25),t()(),e(26,"div")(27,"span",32),r(28,"Date:"),t(),e(29,"span",33),r(30),t()()()()),l&2){let i=n.$implicit,o=u();a(4),p(i.numeroTicket),a(),D(o.getStatutBadgeClass(i.statut)),a(),g(" ",o.getStatutLabel(i.statut)," "),a(),D(o.getPrioriteBadgeClass(i.priorite)),a(),g(" ",o.getPrioriteLabel(i.priorite)," "),a(),v("routerLink",$(13,zt,i.id)),a(3),p(i.titre),a(2),p(i.description),a(6),p(i.demandeur),a(5),p(o.getTypeLabel(i.typeIncident)),a(5),p(o.formatDate(i.dateCreation))}}var Ue=class l{constructor(n){this.ticketService=n}tickets=[];filteredTickets=[];searchTerm="";statusFilter="";typeFilter="";ngOnInit(){this.ticketService.getAllTickets().subscribe(n=>{this.tickets=n,this.applyFilters()})}applyFilters(){this.filteredTickets=this.tickets.filter(n=>{let i=!this.searchTerm||n.numeroTicket.toLowerCase().includes(this.searchTerm.toLowerCase())||n.titre.toLowerCase().includes(this.searchTerm.toLowerCase()),o=!this.statusFilter||n.statut===this.statusFilter,c=!this.typeFilter||n.typeIncident===this.typeFilter;return i&&o&&c})}clearFilters(){this.searchTerm="",this.statusFilter="",this.typeFilter="",this.applyFilters()}getStatutBadgeClass(n){switch(n){case"NOUVEAU":return"bg-red-100 text-red-800";case"EN_COURS":return"bg-yellow-100 text-yellow-800";case"RESOLU":return"bg-green-100 text-green-800";case"FERME":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}getPrioriteBadgeClass(n){switch(n){case"CRITIQUE":return"bg-red-100 text-red-800";case"HAUTE":return"bg-orange-100 text-orange-800";case"NORMALE":return"bg-yellow-100 text-yellow-800";case"BASSE":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}getStatutLabel(n){switch(n){case"NOUVEAU":return"Nouveau";case"EN_COURS":return"En cours";case"RESOLU":return"R\xE9solu";case"FERME":return"Ferm\xE9";default:return n}}getPrioriteLabel(n){switch(n){case"CRITIQUE":return"Critique";case"HAUTE":return"Haute";case"NORMALE":return"Normale";case"BASSE":return"Basse";default:return n}}getTypeLabel(n){switch(n){case"MATERIEL":return"Mat\xE9riel";case"LOGICIEL":return"Logiciel";case"ACCES":return"Acc\xE8s";case"INCIDENT":return"Incident";case"DEMANDE_SERVICE":return"Demande de service";case"DEMANDE_CHANGEMENT":return"Demande de changement";case"PROBLEME":return"Probl\xE8me";case"RESEAU":return"R\xE9seau";default:return n}}formatDate(n){return new Date(n).toLocaleDateString("fr-FR")}static \u0275fac=function(i){return new(i||l)(h(te))};static \u0275cmp=T({type:l,selectors:[["app-ticket-list"]],decls:49,vars:4,consts:[[1,"ticket-list"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],["routerLink","/tickets/nouveau",1,"btn","btn-primary"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"card","p-6","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],[1,"form-label"],["type","text","placeholder","Num\xE9ro, titre...",1,"form-input",3,"ngModelChange","input","ngModel"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],["value","NOUVEAU"],["value","EN_COURS"],["value","RESOLU"],["value","FERME"],["value","PANNE_MATERIEL"],["value","PROBLEME_LOGICIEL"],["value","DEMANDE_ACCES"],[1,"flex","items-end"],[1,"btn","btn-secondary","w-full",3,"click"],[1,"space-y-4"],[1,"card","p-6","hover:shadow-lg","transition-shadow"],[1,"flex","items-center","justify-between","mb-4"],[1,"flex","items-center","space-x-4"],[1,"text-lg","font-semibold","text-gray-900"],[1,"px-2","py-1","text-xs","font-medium","rounded-full"],[1,"text-primary-600","hover:text-primary-700","font-medium",3,"routerLink"],[1,"font-medium","text-gray-900","mb-2"],[1,"text-gray-600","text-sm","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","text-sm"],[1,"text-gray-500"],[1,"ml-1","font-medium"]],template:function(i,o){i&1&&(e(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),r(4,"Gestion des Tickets IT"),t(),e(5,"p",3),r(6),t()(),e(7,"a",4),m(),e(8,"svg",5),d(9,"path",6),t(),r(10," Nouveau Ticket "),t()(),f(),e(11,"div",7)(12,"div",8)(13,"div")(14,"label",9),r(15,"Recherche"),t(),e(16,"input",10),w("ngModelChange",function(s){return y(o.searchTerm,s)||(o.searchTerm=s),s}),x("input",function(){return o.applyFilters()}),t()(),e(17,"div")(18,"label",9),r(19,"Statut"),t(),e(20,"select",11),w("ngModelChange",function(s){return y(o.statusFilter,s)||(o.statusFilter=s),s}),x("change",function(){return o.applyFilters()}),e(21,"option",12),r(22,"Tous"),t(),e(23,"option",13),r(24,"Nouveau"),t(),e(25,"option",14),r(26,"En cours"),t(),e(27,"option",15),r(28,"R\xE9solu"),t(),e(29,"option",16),r(30,"Ferm\xE9"),t()()(),e(31,"div")(32,"label",9),r(33,"Type"),t(),e(34,"select",11),w("ngModelChange",function(s){return y(o.typeFilter,s)||(o.typeFilter=s),s}),x("change",function(){return o.applyFilters()}),e(35,"option",12),r(36,"Tous"),t(),e(37,"option",17),r(38,"Panne mat\xE9riel"),t(),e(39,"option",18),r(40,"Probl\xE8me logiciel"),t(),e(41,"option",19),r(42,"Demande d'acc\xE8s"),t()()(),e(43,"div",20)(44,"button",21),x("click",function(){return o.clearFilters()}),r(45,"R\xE9initialiser"),t()()()(),e(46,"div",22),O(47,Gt,31,15,"div",23,Ht),t()()),i&2&&(a(6),g("",o.filteredTickets.length," tickets au total"),a(10),_("ngModel",o.searchTerm),a(4),_("ngModel",o.statusFilter),a(14),_("ngModel",o.typeFilter),a(13),V(o.filteredTickets))},dependencies:[M,L,U,j,ne,re,q,ie,Q,K],styles:[".ticket-list[_ngcontent-%COMP%]{min-height:calc(100vh - 7rem)}"]})};var Wt=l=>["/tickets",l,"traitement"];function qt(l,n){if(l&1&&(e(0,"div",33)(1,"button",34),m(),e(2,"svg",35),d(3,"path",36)(4,"path",37),t(),r(5," \u{1F527} Traitement du ticket "),t()()),l&2){let i=u(2);a(),v("routerLink",$(1,Wt,i.ticket.id))}}function Qt(l,n){if(l&1){let i=k();e(0,"div",1)(1,"div",2)(2,"div")(3,"button",3),x("click",function(){E(i);let c=u();return S(c.goBack())}),m(),e(4,"svg",4),d(5,"path",5),t(),r(6," Retour \xE0 la liste "),t(),f(),e(7,"h1",6),r(8),t(),e(9,"p",7),r(10,"Consultation du d\xE9tail et traitement du ticket IT"),t()(),N(11,qt,6,3,"div",8),t(),e(12,"div",9)(13,"div",10)(14,"div",11),m(),e(15,"svg",12),d(16,"path",13),t()(),f(),e(17,"div")(18,"h2",14),r(19,"\u{1F3AB} R\xE9sum\xE9 du Ticket"),t(),e(20,"p",15),r(21),t()(),e(22,"div",16)(23,"span"),r(24),t()()(),e(25,"div",17)(26,"div")(27,"p",18),r(28,"\u{1F464} Demandeur"),t(),e(29,"p",19),r(30),t(),e(31,"p",20),r(32,"Ticket IT"),t()(),e(33,"div")(34,"p",18),r(35,"\u{1F4C5} Dates importantes"),t(),e(36,"p",19),r(37),z(38,"date"),t(),e(39,"p",20),r(40),t()(),e(41,"div")(42,"p",18),r(43,"\u26A1 Urgence & Impact"),t(),e(44,"p",19),r(45),t(),e(46,"p",20),r(47),t()()(),e(48,"div",21)(49,"p",22),r(50,"\u{1F4DD} Description"),t(),e(51,"p",19),r(52),t()()(),e(53,"div",23)(54,"h2",24),m(),e(55,"svg",25),d(56,"path",26),t(),r(57," Informations techniques d\xE9taill\xE9es "),t(),f(),e(58,"div",27)(59,"div")(60,"p",28),r(61,"Titre"),t(),e(62,"p",29),r(63),t()(),e(64,"div")(65,"p",28),r(66,"Demandeur"),t(),e(67,"p",29),r(68),t()(),e(69,"div")(70,"p",28),r(71,"Type d'incident"),t(),e(72,"p",29),r(73),t()(),e(74,"div")(75,"p",28),r(76,"Priorit\xE9"),t(),e(77,"span"),r(78),t()(),e(79,"div")(80,"p",28),r(81,"Statut"),t(),e(82,"span"),r(83),t()(),e(84,"div")(85,"p",28),r(86,"Assign\xE9 \xE0"),t(),e(87,"p",29),r(88),t()()(),e(89,"div",30)(90,"p",31),r(91,"Description technique compl\xE8te"),t(),e(92,"p",32),r(93),t()()()()}if(l&2){let i=u();a(8),g("\u{1F3AB} Ticket ",i.ticket.numeroTicket),a(3),v("ngIf",i.canProcessTicket()),a(10),Z("",i.ticket.typeIncident," \u2022 ",i.ticket.priorite),a(2),D(oe("px-3 py-1 text-sm font-medium rounded-full ",i.getStatutColor(i.ticket.statut))),a(),g(" ",i.ticket.statut," "),a(6),p(i.ticket.demandeur),a(7),g("Cr\xE9\xE9 le ",H(38,27,i.ticket.dateCreation,"dd/MM/yyyy")),a(3),g("Assign\xE9 \xE0 ",i.ticket.assigneA||"Non assign\xE9"),a(5),g("Priorit\xE9: ",i.ticket.priorite),a(2),g("Type: ",i.ticket.typeIncident),a(5),p(i.ticket.description),a(11),p(i.ticket.titre),a(5),p(i.ticket.demandeur),a(5),p(i.ticket.typeIncident),a(4),D(oe("px-2 py-1 text-xs font-medium rounded-full ",i.getPrioriteColor(i.ticket.priorite))),a(),g(" ",i.ticket.priorite," "),a(4),D(oe("px-2 py-1 text-xs font-medium rounded-full ",i.getStatutColor(i.ticket.statut))),a(),g(" ",i.ticket.statut," "),a(5),p(i.ticket.assigneA||"Non assign\xE9"),a(5),p(i.ticket.description)}}var Le=class l{constructor(n,i,o,c){this.route=n;this.router=i;this.ticketService=o;this.authService=c}ticket;currentUser=null;ngOnInit(){this.currentUser=this.authService.getCurrentUser();let n=this.route.snapshot.paramMap.get("id");n&&this.ticketService.getTicketById(n).subscribe(i=>{this.ticket=i})}goBack(){this.router.navigate(["/tickets"])}canProcessTicket(){return this.currentUser?this.currentUser.role==="SUPERVISEUR_IT"||this.currentUser.role==="ADMIN"||this.currentUser.role==="TECHNICIEN_IT":!1}getStatutColor(n){return{NOUVEAU:"bg-red-100 text-red-800",EN_COURS:"bg-yellow-100 text-yellow-800",EN_ATTENTE:"bg-blue-100 text-blue-800",RESOLU:"bg-green-100 text-green-800",FERME:"bg-gray-100 text-gray-800",SUSPENDU:"bg-gray-100 text-gray-800"}[n]||"bg-gray-100 text-gray-800"}getPrioriteColor(n){return{CRITIQUE:"bg-red-100 text-red-800",HAUTE:"bg-orange-100 text-orange-800",NORMALE:"bg-blue-100 text-blue-800",BASSE:"bg-gray-100 text-gray-800"}[n]||"bg-gray-100 text-gray-800"}static \u0275fac=function(i){return new(i||l)(h(ce),h(A),h(te),h(F))};static \u0275cmp=T({type:l,selectors:[["app-ticket-detail"]],decls:1,vars:1,consts:[["class","ticket-detail",4,"ngIf"],[1,"ticket-detail"],[1,"mb-6","flex","items-center","justify-between"],[1,"text-primary-600","hover:text-primary-700","mb-4","flex","items-center",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],["class","flex space-x-3",4,"ngIf"],[1,"card","p-6","mb-6","bg-gradient-to-r","from-purple-50","to-indigo-50","border-purple-200"],[1,"flex","items-center","mb-4"],[1,"p-2","bg-purple-100","rounded-lg","mr-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a1 1 0 001 1h1a1 1 0 001-1V7a2 2 0 00-2-2H5zM5 14a2 2 0 00-2 2v3a1 1 0 001 1h1a1 1 0 001-1v-3a2 2 0 00-2-2H5z"],[1,"text-lg","font-semibold","text-purple-900"],[1,"text-sm","text-purple-700"],[1,"ml-auto"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","text-sm"],[1,"text-purple-600","font-medium"],[1,"text-purple-900"],[1,"text-purple-700"],[1,"mt-4","pt-4","border-t","border-purple-200"],[1,"text-purple-600","font-medium","mb-2"],[1,"card","p-6"],[1,"text-lg","font-semibold","mb-4","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"text-sm","text-gray-600"],[1,"font-medium"],[1,"mt-6"],[1,"text-sm","text-gray-600","mb-2"],[1,"text-gray-900","bg-gray-50","p-4","rounded-lg"],[1,"flex","space-x-3"],[1,"inline-flex","items-center","px-4","py-2","border","border-purple-300","text-sm","font-medium","rounded-md","text-purple-700","bg-purple-50","hover:bg-purple-100","transition-colors",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"]],template:function(i,o){i&1&&N(0,Qt,94,30,"div",0),i&2&&v("ngIf",o.ticket)},dependencies:[M,le,L,U,se],styles:[".ticket-detail[_ngcontent-%COMP%]{min-height:calc(100vh - 7rem)}"]})};function Kt(l,n){if(l&1){let i=k();e(0,"div",35)(1,"span",36),r(2),t(),e(3,"button",37),x("click",function(){let c=E(i).index,s=u(2);return S(s.removeFile(c))}),m(),e(4,"svg",38),d(5,"path",39),t()()()}if(l&2){let i=n.$implicit;a(2),p(i.nom)}}function Xt(l,n){if(l&1&&(e(0,"div",31)(1,"h4",32),r(2,"Fichiers s\xE9lectionn\xE9s :"),t(),e(3,"div",33),N(4,Kt,6,1,"div",34),t()()),l&2){let i=u();a(4),v("ngForOf",i.fichiers)}}var Fe=class l{constructor(n,i){this.router=n;this.ticketService=i}formData={titre:"",description:"",typeIncident:void 0,priorite:"NORMALE",demandeur:""};fichiers=[];onFilesSelected(n){this.fichiers=[...this.fichiers,...n]}removeFile(n){this.fichiers.splice(n,1)}onSubmit(){let n=Se(Ee({},this.formData),{fichiers:this.fichiers});this.ticketService.createTicket(n).subscribe(()=>{this.router.navigate(["/tickets"])})}goBack(){this.router.navigate(["/tickets"])}static \u0275fac=function(i){return new(i||l)(h(A),h(te))};static \u0275cmp=T({type:l,selectors:[["app-ticket-create"]],decls:61,vars:8,consts:[[1,"ticket-create"],[1,"mb-6"],[1,"text-2xl","font-bold","text-gray-900"],[1,"card","p-6"],[3,"ngSubmit"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"form-group"],[1,"form-label"],["type","text","name","titre","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","email","name","demandeur","required","",1,"form-input",3,"ngModelChange","ngModel"],["name","type","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],["value","PANNE_MATERIEL"],["value","PROBLEME_LOGICIEL"],["value","DEMANDE_ACCES"],["value","INSTALLATION"],["value","FORMATION"],["value","MAINTENANCE"],["value","AUTRE"],["name","priorite","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","BASSE"],["value","MOYENNE"],["value","HAUTE"],["value","TRES_HAUTE"],[1,"form-group","mt-6"],["name","description","rows","4","required","",1,"form-textarea",3,"ngModelChange","ngModel"],[3,"filesUploaded","maxFiles","multiple"],["class","mt-4",4,"ngIf"],[1,"mt-6","flex","justify-end","space-x-4"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],[1,"mt-4"],[1,"text-sm","font-medium","text-gray-900","mb-2"],[1,"space-y-2"],["class","flex items-center justify-between p-2 bg-gray-50 rounded",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","p-2","bg-gray-50","rounded"],[1,"text-sm","text-gray-700"],["type","button",1,"text-red-600","hover:text-red-800",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"]],template:function(i,o){i&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"Cr\xE9er un nouveau ticket"),t()(),e(4,"div",3)(5,"form",4),x("ngSubmit",function(){return o.onSubmit()}),e(6,"div",5)(7,"div",6)(8,"label",7),r(9,"Titre"),t(),e(10,"input",8),w("ngModelChange",function(s){return y(o.formData.titre,s)||(o.formData.titre=s),s}),t()(),e(11,"div",6)(12,"label",7),r(13,"Demandeur"),t(),e(14,"input",9),w("ngModelChange",function(s){return y(o.formData.demandeur,s)||(o.formData.demandeur=s),s}),t()(),e(15,"div",6)(16,"label",7),r(17,"Type d'incident"),t(),e(18,"select",10),w("ngModelChange",function(s){return y(o.formData.typeIncident,s)||(o.formData.typeIncident=s),s}),e(19,"option",11),r(20,"S\xE9lectionner un type"),t(),e(21,"option",12),r(22,"Panne mat\xE9riel"),t(),e(23,"option",13),r(24,"Probl\xE8me logiciel"),t(),e(25,"option",14),r(26,"Demande d'acc\xE8s"),t(),e(27,"option",15),r(28,"Installation"),t(),e(29,"option",16),r(30,"Formation"),t(),e(31,"option",17),r(32,"Maintenance"),t(),e(33,"option",18),r(34,"Autre"),t()()(),e(35,"div",6)(36,"label",7),r(37,"Priorit\xE9"),t(),e(38,"select",19),w("ngModelChange",function(s){return y(o.formData.priorite,s)||(o.formData.priorite=s),s}),e(39,"option",20),r(40,"Basse"),t(),e(41,"option",21),r(42,"Moyenne"),t(),e(43,"option",22),r(44,"Haute"),t(),e(45,"option",23),r(46,"Tr\xE8s haute"),t()()()(),e(47,"div",24)(48,"label",7),r(49,"Description"),t(),e(50,"textarea",25),w("ngModelChange",function(s){return y(o.formData.description,s)||(o.formData.description=s),s}),t()(),e(51,"div",24)(52,"label",7),r(53,"Pi\xE8ces jointes"),t(),e(54,"app-file-upload",26),x("filesUploaded",function(s){return o.onFilesSelected(s)}),t(),N(55,Xt,5,1,"div",27),t(),e(56,"div",28)(57,"button",29),x("click",function(){return o.goBack()}),r(58,"Annuler"),t(),e(59,"button",30),r(60,"Cr\xE9er le ticket"),t()()()()()),i&2&&(a(10),_("ngModel",o.formData.titre),a(4),_("ngModel",o.formData.demandeur),a(4),_("ngModel",o.formData.typeIncident),a(20),_("ngModel",o.formData.priorite),a(12),_("ngModel",o.formData.description),a(4),v("maxFiles",5)("multiple",!0),a(),v("ngIf",o.fichiers.length>0))},dependencies:[M,ae,le,j,ue,ne,re,q,ie,Q,de,ge,K,pe,he],styles:[".ticket-create[_ngcontent-%COMP%]{min-height:calc(100vh - 7rem)}"]})};var Jt=(l,n)=>n.email;function Yt(l,n){if(l&1&&(e(0,"div",13),r(1),t()),l&2){let i=u();a(),g(" ",i.errorMessage," ")}}function Zt(l,n){l&1&&(m(),e(0,"svg",20),d(1,"circle",21)(2,"path",22),t(),r(3," Connexion... "))}function $t(l,n){l&1&&r(0," Se connecter ")}function ei(l,n){if(l&1){let i=k();e(0,"div",23),x("click",function(){let c=E(i).$implicit,s=u();return S(s.quickLogin(c))}),e(1,"div",24)(2,"div",25)(3,"div",26)(4,"span",27),r(5),t(),e(6,"span",28),r(7),t()(),e(8,"p",29),r(9),t()(),m(),e(10,"svg",30),d(11,"path",31),t()()()}if(l&2){let i=n.$implicit;a(5),p(i.role),a(2),p(i.email),a(2),p(i.description)}}var Ne=class l{constructor(n,i,o){this.authService=n;this.router=i;this.route=o;this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/dashboard"}loginForm={email:"",password:""};errorMessage="";isLoading=!1;returnUrl="/dashboard";demoAccounts=[{email:"admin@anare-ci.org",password:"demo123",role:"Administrateur",description:"Acc\xE8s complet au syst\xE8me"},{email:"superviseur.recours@anare-ci.org",password:"demo123",role:"Superviseur Recours",description:"Supervision \xE9quipe recours et gestion avanc\xE9e"},{email:"superviseur.it@anare-ci.org",password:"demo123",role:"Superviseur IT",description:"Supervision \xE9quipe IT et support technique"},{email:"utilisateur@anare-ci.org",password:"demo123",role:"Utilisateur",description:"Cr\xE9ation recours/tickets et suivi des demandes"}];login(){this.isLoading||(this.errorMessage="",this.isLoading=!0,console.log("Tentative de connexion avec:",this.loginForm.email,this.loginForm.password),this.authService.login(this.loginForm.email,this.loginForm.password).subscribe({next:n=>{console.log("Connexion r\xE9ussie:",n),this.isLoading=!1,this.router.navigate([this.returnUrl])},error:n=>{console.error("Erreur de connexion:",n),this.errorMessage="Identifiants incorrects. Veuillez r\xE9essayer.",this.isLoading=!1}}))}quickLogin(n){console.log("Connexion rapide avec:",n),this.loginForm.email=n.email,this.loginForm.password="demo123",setTimeout(()=>{this.login()},500)}static \u0275fac=function(i){return new(i||l)(h(F),h(A),h(ce))};static \u0275cmp=T({type:l,selectors:[["app-login"]],decls:31,vars:5,consts:[[1,"login-container"],[1,"login-card","animate-scale-in"],[1,"login-header"],[1,"login-logo"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"login-title"],[1,"login-subtitle"],[1,"space-y-6",3,"ngSubmit"],[1,"form-group"],[1,"form-label"],["type","email","name","email","placeholder","votre@email.com","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"form-input",3,"ngModelChange","ngModel"],[1,"bg-red-50","border","border-red-200","text-red-700","px-4","py-3","rounded-lg","text-sm"],["type","submit",1,"btn","btn-primary","w-full","btn-lg",3,"disabled"],[1,"mt-8","border-t","border-gray-200","pt-8"],[1,"text-sm","font-semibold","text-gray-900","mb-4","text-center"],[1,"space-y-3"],[1,"bg-gray-50","rounded-xl","p-4","hover:bg-gray-100","transition-colors","cursor-pointer"],[1,"text-xs","text-gray-500","text-center","mt-4"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"bg-gray-50","rounded-xl","p-4","hover:bg-gray-100","transition-colors","cursor-pointer",3,"click"],[1,"flex","items-center","justify-between"],[1,"flex-1"],[1,"flex","items-center","space-x-2","mb-1"],[1,"text-sm","font-semibold","text-gray-900"],[1,"badge","badge-info"],[1,"text-xs","text-gray-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"]],template:function(i,o){i&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m(),e(4,"svg",4),d(5,"path",5),t()(),f(),e(6,"h1",6),r(7,"ANARE-CI"),t(),e(8,"p",7),r(9,"Syst\xE8me de gestion des recours et ticketing"),t()(),e(10,"form",8),x("ngSubmit",function(){return o.login()}),e(11,"div",9)(12,"label",10),r(13,"Email"),t(),e(14,"input",11),w("ngModelChange",function(s){return y(o.loginForm.email,s)||(o.loginForm.email=s),s}),t()(),e(15,"div",9)(16,"label",10),r(17,"Mot de passe"),t(),e(18,"input",12),w("ngModelChange",function(s){return y(o.loginForm.password,s)||(o.loginForm.password=s),s}),t()(),C(19,Yt,2,1,"div",13),e(20,"button",14),C(21,Zt,4,0)(22,$t,1,0),t()(),e(23,"div",15)(24,"h3",16),r(25,"Comptes de d\xE9monstration"),t(),e(26,"div",17),O(27,ei,12,3,"div",18,Jt),t(),e(29,"p",19),r(30," Cliquez sur un compte pour vous connecter directement "),t()()()()),i&2&&(a(14),_("ngModel",o.loginForm.email),a(4),_("ngModel",o.loginForm.password),a(),b(o.errorMessage?19:-1),a(),v("disabled",o.isLoading),a(),b(o.isLoading?21:22),a(6),V(o.demoAccounts))},dependencies:[M,j,ue,q,Q,de,ge,K,pe],styles:[".animate-scale-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_scaleIn .3s ease-out}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}"]})};var X=class l{constructor(n,i){this.authService=n;this.router=i}canActivate(n,i){return this.authService.currentUser$.pipe(We(o=>o?!0:(console.log("Utilisateur non authentifi\xE9, redirection vers /login"),this.router.navigate(["/login"],{queryParams:{returnUrl:i.url}}),!1)))}static \u0275fac=function(i){return new(i||l)(je(F),je(A))};static \u0275prov=Ce({token:l,factory:l.\u0275fac,providedIn:"root"})};var at=[{path:"login",component:Ne},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"dashboard",component:Me,canActivate:[X]},{path:"recours",canActivate:[X],children:[{path:"",component:ke},{path:"nouveau",component:Ae},{path:":id",component:Ie},{path:":id/traitement",loadComponent:()=>import("./chunk-NSV7FD6H.js").then(l=>l.TraitementComponent)}]},{path:"tickets",canActivate:[X],children:[{path:"",component:Ue},{path:"nouveau",component:Fe},{path:":id",component:Le},{path:":id/traitement",loadComponent:()=>import("./chunk-NSV7FD6H.js").then(l=>l.TraitementComponent)}]},{path:"traitement/recours/:id",loadComponent:()=>import("./chunk-NSV7FD6H.js").then(l=>l.TraitementComponent),canActivate:[X]},{path:"traitement/tickets/:id",loadComponent:()=>import("./chunk-NSV7FD6H.js").then(l=>l.TraitementComponent),canActivate:[X]},{path:"rapports",loadComponent:()=>import("./chunk-CYI63UYS.js").then(l=>l.RapportsComponent),canActivate:[X]},{path:"admin",loadComponent:()=>import("./chunk-7SM6Y3QJ.js").then(l=>l.AdminComponent),canActivate:[X]},{path:"**",redirectTo:"/login"}];var lt={providers:[qe(),Ye({eventCoalescing:!0}),tt(at)]};function ti(l,n){if(l&1){let i=k();e(0,"div",2)(1,"div",3)(2,"div",4),m(),e(3,"svg",5),d(4,"path"),t()(),f(),e(5,"div",6)(6,"p",7),r(7),t(),e(8,"p",8),r(9),t()(),e(10,"div",9)(11,"button",10),x("click",function(){let c=E(i).$implicit,s=u();return S(s.removeToast(c.id))}),m(),e(12,"svg",11),d(13,"path",12),t()()()()()}if(l&2){let i=n.$implicit,o=u();v("ngClass",o.getToastClass(i.type)),a(3),v("ngClass",o.getIconClass(i.type)),a(),W("d",o.getIconPath(i.type)),a(2),v("ngClass",o.getTitleClass(i.type)),a(),g(" ",i.title," "),a(2),g(" ",i.message," ")}}var Oe=class l{constructor(n){this.toastService=n;this.subscription=this.toastService.toasts$.subscribe(i=>this.toasts=i)}toasts=[];subscription;ngOnDestroy(){this.subscription.unsubscribe()}removeToast(n){this.toastService.remove(n)}getToastClass(n){switch(n){case"success":return"border-green-400 bg-green-50";case"error":return"border-red-400 bg-red-50";case"warning":return"border-yellow-400 bg-yellow-50";case"info":return"border-blue-400 bg-blue-50";default:return"border-gray-400 bg-gray-50"}}getIconClass(n){switch(n){case"success":return"text-green-400";case"error":return"text-red-400";case"warning":return"text-yellow-400";case"info":return"text-blue-400";default:return"text-gray-400"}}getTitleClass(n){switch(n){case"success":return"text-green-800";case"error":return"text-red-800";case"warning":return"text-yellow-800";case"info":return"text-blue-800";default:return"text-gray-800"}}getIconPath(n){switch(n){case"success":return"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z";case"error":return"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z";case"warning":return"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z";case"info":return"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z";default:return"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"}}static \u0275fac=function(i){return new(i||l)(h(Te))};static \u0275cmp=T({type:l,selectors:[["app-toast-container"]],decls:2,vars:1,consts:[[1,"fixed","top-4","right-4","z-50","space-y-2"],["class","min-w-80 bg-white rounded-lg shadow-lg border-l-4 p-4 transform transition-all duration-300",3,"ngClass",4,"ngFor","ngForOf"],[1,"min-w-80","bg-white","rounded-lg","shadow-lg","border-l-4","p-4","transform","transition-all","duration-300",3,"ngClass"],[1,"flex","items-start"],[1,"flex-shrink-0"],["fill","currentColor","viewBox","0 0 20 20",1,"h-5","w-5",3,"ngClass"],[1,"ml-3","flex-1"],[1,"text-sm","font-medium",3,"ngClass"],[1,"mt-1","text-sm","text-gray-600"],[1,"ml-4","flex-shrink-0","flex"],[1,"inline-flex","text-gray-400","hover:text-gray-600","focus:outline-none",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"h-4","w-4"],["fill-rule","evenodd","d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule","evenodd"]],template:function(i,o){i&1&&(e(0,"div",0),N(1,ti,14,6,"div",1),t()),i&2&&(a(),v("ngForOf",o.toasts))},dependencies:[M,_e,ae],encapsulation:2})};function ii(l,n){if(l&1){let i=k();e(0,"div",1)(1,"div",2)(2,"div",3),x("click",function(){let c=E(i).$implicit,s=u();return S(s.closeModal(c.id,!1))}),t(),e(3,"span",4),r(4,"\u200B"),t(),e(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),m(),e(9,"svg",9),d(10,"path",10),t()(),f(),e(11,"div",11)(12,"h3",12),r(13),t(),e(14,"div",13)(15,"p",14),r(16),t()()()()(),e(17,"div",15)(18,"button",16),x("click",function(){let c=E(i).$implicit,s=u();return S(s.closeModal(c.id,!0))}),r(19),t(),e(20,"button",17),x("click",function(){let c=E(i).$implicit,s=u();return S(s.closeModal(c.id,!1))}),r(21),t()()()()()}if(l&2){let i=n.$implicit,o=u();W("aria-labelledby","modal-title-"+i.id)("aria-describedby","modal-description-"+i.id),a(8),v("ngClass",o.getIconBgClass(i.type)),a(),v("ngClass",o.getIconClass(i.type)),a(),W("d",o.getIconPath(i.type)),a(2),v("id","modal-title-"+i.id),a(),g(" ",i.title," "),a(2),v("id","modal-description-"+i.id),a(),g(" ",i.message," "),a(2),v("ngClass",o.getConfirmButtonClass(i.type)),a(),g(" ",i.confirmText," "),a(2),g(" ",i.cancelText," ")}}var Ve=class l{constructor(n){this.modalService=n;this.subscription=this.modalService.modals$.subscribe(i=>this.modals=i)}modals=[];subscription;ngOnDestroy(){this.subscription.unsubscribe()}closeModal(n,i){this.modalService.close(n,i)}getIconBgClass(n){switch(n){case"danger":return"bg-red-100";case"warning":return"bg-yellow-100";case"success":return"bg-green-100";case"info":return"bg-blue-100";default:return"bg-blue-100"}}getIconClass(n){switch(n){case"danger":return"text-red-600";case"warning":return"text-yellow-600";case"success":return"text-green-600";case"info":return"text-blue-600";default:return"text-blue-600"}}getConfirmButtonClass(n){switch(n){case"danger":return"bg-red-600 hover:bg-red-700 focus:ring-red-500";case"warning":return"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500";case"success":return"bg-green-600 hover:bg-green-700 focus:ring-green-500";case"info":return"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500";default:return"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"}}getIconPath(n){switch(n){case"danger":return"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z";case"warning":return"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z";case"success":return"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z";case"info":return"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z";default:return"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}}static \u0275fac=function(i){return new(i||l)(h(ot))};static \u0275cmp=T({type:l,selectors:[["app-modal-container"]],decls:1,vars:1,consts:[["class","fixed inset-0 z-50 overflow-y-auto","role","dialog","aria-modal","true",4,"ngFor","ngForOf"],["role","dialog","aria-modal","true",1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity",3,"click"],["aria-hidden","true",1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"bg-white","px-4","pt-5","pb-4","sm:p-6","sm:pb-4"],[1,"sm:flex","sm:items-start"],[1,"mx-auto","flex-shrink-0","flex","items-center","justify-center","h-12","w-12","rounded-full","sm:mx-0","sm:h-10","sm:w-10",3,"ngClass"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6",3,"ngClass"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left"],[1,"text-lg","leading-6","font-medium","text-gray-900",3,"id"],[1,"mt-2"],[1,"text-sm","text-gray-500",3,"id"],[1,"bg-gray-50","px-4","py-3","sm:px-6","sm:flex","sm:flex-row-reverse"],["type","button",1,"w-full","inline-flex","justify-center","rounded-md","border","border-transparent","shadow-sm","px-4","py-2","text-base","font-medium","text-white","focus:outline-none","focus:ring-2","focus:ring-offset-2","sm:ml-3","sm:w-auto","sm:text-sm",3,"click","ngClass"],["type","button",1,"mt-3","w-full","inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","sm:mt-0","sm:ml-3","sm:w-auto","sm:text-sm",3,"click"]],template:function(i,o){i&1&&N(0,ii,22,12,"div",0),i&2&&v("ngForOf",o.modals)},dependencies:[M,_e,ae],encapsulation:2})};var ni=(l,n)=>n.route;function ri(l,n){if(l&1){let i=k();e(0,"button",11),x("click",function(){E(i);let c=u(2);return S(c.toggleSidebar())}),m(),e(1,"svg",12),d(2,"path",34),t()()}}function oi(l,n){if(l&1&&(e(0,"li")(1,"a",35),m(),e(2,"svg",36),d(3,"path",37),t(),f(),e(4,"span",38),r(5),t()()()),l&2){let i=u().$implicit,o=u(2);a(),v("routerLink",i.route),W("title",o.isSidebarCollapsed?i.label:null),a(2),W("d",i.icon),a(),P("hidden",o.isSidebarCollapsed),a(),p(i.label)}}function ai(l,n){if(l&1&&C(0,oi,6,6,"li"),l&2){let i=n.$implicit,o=u(2);b(o.hasAccess(i.roles)?0:-1)}}function li(l,n){if(l&1){let i=k();e(0,"button",39),x("click",function(){E(i);let c=u(2);return S(c.logout())}),m(),e(1,"svg",23),d(2,"path",24),t()()}}function si(l,n){if(l&1){let i=k();e(0,"div",40),x("click",function(){E(i);let c=u(2);return S(c.toggleMobileMenu())}),t()}}function ci(l,n){if(l&1){let i=k();e(0,"nav",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),m(),e(5,"svg",6),d(6,"path",7),t()()(),f(),e(7,"div",8)(8,"h1",9),r(9,"ANARE-CI"),t(),e(10,"p",10),r(11,"Gestion Recours"),t()()(),e(12,"button",11),x("click",function(){E(i);let c=u();return S(c.toggleSidebar())}),m(),e(13,"svg",12),d(14,"path",13),t()(),C(15,ri,3,0,"button",14),t(),f(),e(16,"div",15)(17,"ul",16),O(18,ai,1,1,null,null,ni),t()(),e(20,"div",17)(21,"div",3)(22,"div",4)(23,"div",18),r(24),t()(),e(25,"div",19)(26,"p",20),r(27),t(),e(28,"p",21),r(29),t()(),e(30,"button",22),x("click",function(){E(i);let c=u();return S(c.logout())}),m(),e(31,"svg",23),d(32,"path",24),t()()(),C(33,li,3,0,"button",25),t()(),C(34,si,1,0,"div",26),f(),e(35,"main",27)(36,"div",28)(37,"button",29),x("click",function(){E(i);let c=u();return S(c.toggleMobileMenu())}),m(),e(38,"svg",30),d(39,"path",31),t()(),f(),e(40,"h1",32),r(41,"ANARE-CI"),t(),e(42,"div",18),r(43),t()(),e(44,"div",33),d(45,"router-outlet"),t()()}if(l&2){let i=u();P("collapsed",i.isSidebarCollapsed)("mobile-open",i.mobileMenuOpen),a(2),P("justify-center",i.isSidebarCollapsed),a(5),P("hidden",i.isSidebarCollapsed),a(5),P("hidden",i.isSidebarCollapsed),a(3),b(i.isSidebarCollapsed?15:-1),a(3),V(i.menuItems),a(3),P("justify-center",i.isSidebarCollapsed),a(3),g(" ",i.getInitials(i.currentUser)," "),a(),P("hidden",i.isSidebarCollapsed),a(2),p(i.getUserDisplayName()),a(2),p(i.getRoleLabel(i.currentUser.role)),a(),P("hidden",i.isSidebarCollapsed),a(3),b(i.isSidebarCollapsed?33:-1),a(),b(i.mobileMenuOpen?34:-1),a(),P("sidebar-collapsed",i.isSidebarCollapsed),a(8),g(" ",i.getInitials(i.currentUser)," ")}}function mi(l,n){l&1&&d(0,"router-outlet")}var Pe=class l{constructor(n,i){this.authService=n;this.router=i}currentUser=null;isSidebarCollapsed=!1;mobileMenuOpen=!1;UserRole=me;menuItems=[{label:"Tableau de bord",icon:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586l-1 1V5H4v14h16v-2.586l1 1V20a1 1 0 01-1 1H4a1 1 0 01-1-1V4z",route:"/dashboard",roles:["ADMIN","SUPERVISEUR_RECOURS","SUPERVISEUR_IT","UTILISATEUR"]},{label:"Recours",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",route:"/recours",roles:["ADMIN","SUPERVISEUR_RECOURS","UTILISATEUR"]},{label:"Tickets IT",icon:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z",route:"/tickets",roles:["ADMIN","SUPERVISEUR_IT","UTILISATEUR"]},{label:"Rapports",icon:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z",route:"/rapports",roles:["ADMIN","SUPERVISEUR_RECOURS","SUPERVISEUR_IT"]},{label:"Administration",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z",route:"/admin",roles:["ADMIN"]}];ngOnInit(){this.authService.currentUser$.subscribe(n=>{this.currentUser=n})}toggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed}toggleMobileMenu(){this.mobileMenuOpen=!this.mobileMenuOpen}logout(){this.authService.logout(),this.router.navigate(["/login"])}getInitials(n){return`${n.prenom.charAt(0)}${n.nom.charAt(0)}`.toUpperCase()}getRoleLabel(n){return{ADMIN:"Administrateur",AGENT_RECOURS:"Agent Recours",TECHNICIEN_IT:"Technicien IT",SUPERVISEUR_RECOURS:"Superviseur Recours",SUPERVISEUR_IT:"Superviseur IT",UTILISATEUR:"Utilisateur"}[n]||n}hasRole(n){return this.authService.hasRole(n)}hasAccess(n){return this.authService.hasAnyRole(n)}getUserDisplayName(){return this.currentUser?`${this.currentUser.prenom} ${this.currentUser.nom}`:""}getRoleDisplayName(){return this.currentUser?{ADMIN:"Administrateur",AGENT_RECOURS:"Agent Recours",SUPERVISEUR_RECOURS:"Superviseur Recours",TECHNICIEN_IT:"Technicien IT",SUPERVISEUR_IT:"Superviseur IT",UTILISATEUR:"Utilisateur"}[this.currentUser.role]||this.currentUser.role:""}static \u0275fac=function(i){return new(i||l)(h(F),h(A))};static \u0275cmp=T({type:l,selectors:[["app-root"]],decls:5,vars:3,consts:[[1,"min-h-screen","bg-gray-50"],[1,"sidebar"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-200"],[1,"flex","items-center","space-x-3"],[1,"flex-shrink-0"],[1,"w-10","h-10","bg-gradient-to-br","from-primary-500","to-primary-600","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"logo-text"],[1,"text-lg","font-bold","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"p-2","rounded-lg","hover:bg-gray-100","transition-colors","duration-200","hidden","lg:block",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 19l-7-7 7-7m8 14l-7-7 7-7"],[1,"p-2","rounded-lg","hover:bg-gray-100","transition-colors","duration-200","hidden","lg:block"],[1,"flex-1","py-4"],[1,"space-y-1"],[1,"p-4","border-t","border-gray-200"],[1,"w-10","h-10","bg-gradient-to-br","from-primary-500","to-primary-600","rounded-full","flex","items-center","justify-center","text-white","font-semibold","text-sm"],[1,"user-info","flex-1","min-w-0"],[1,"text-sm","font-medium","text-gray-900","truncate"],[1,"text-xs","text-gray-500","truncate"],["title","D\xE9connexion",1,"p-2","rounded-lg","hover:bg-gray-100","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],["title","D\xE9connexion",1,"w-full","mt-3","p-2","rounded-lg","hover:bg-gray-100","transition-colors","duration-200","flex","justify-center"],[1,"fixed","inset-0","z-40","bg-black","bg-opacity-50","lg:hidden"],[1,"main-content"],[1,"lg:hidden","bg-white","border-b","border-gray-200","px-4","py-3","flex","items-center","justify-between"],[1,"p-2","rounded-lg","hover:bg-gray-100",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],[1,"text-lg","font-semibold"],[1,"p-4","lg:p-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 5l7 7-7 7M5 5l7 7-7 7"],["routerLinkActive","active",1,"nav-item","group",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"nav-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"nav-text"],["title","D\xE9connexion",1,"w-full","mt-3","p-2","rounded-lg","hover:bg-gray-100","transition-colors","duration-200","flex","justify-center",3,"click"],[1,"fixed","inset-0","z-40","bg-black","bg-opacity-50","lg:hidden",3,"click"]],template:function(i,o){i&1&&(e(0,"div",0),C(1,ci,46,25)(2,mi,1,0,"router-outlet"),t(),d(3,"app-toast-container")(4,"app-modal-container")),i&2&&(P("overflow-hidden",o.mobileMenuOpen),a(),b(o.currentUser?1:2))},dependencies:[M,$e,L,U,et,j,Oe,Ve],encapsulation:2})};Ze(Pe,lt).catch(l=>console.error(l));
